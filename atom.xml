<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Japan Azure Identity Support Blog</title>
  
  <subtitle>日本マイクロソフトの Azure Active Directory と AD FS に関するサポート情報のブログです。</subtitle>
  <link href="https://jpazureid.github.io/blog/atom.xml" rel="self"/>
  
  <link href="https://jpazureid.github.io/blog/"/>
  <updated>2023-09-14T07:05:49.767Z</updated>
  <id>https://jpazureid.github.io/blog/</id>
  
  <author>
    <name>Azure Identity Support Japan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Microsoft Entra ID Governance のアクセス レビューに 2 つの新機能を導入</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-id-governance-introduces-two-new-features-in-access-reviews/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-id-governance-introduces-two-new-features-in-access-reviews/</id>
    <published>2023-09-12T00:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.767Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 北村 です。</p><p>本記事は、2023 年 7 月 17 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/microsoft-entra-id-governance-introduces-two-new-features-in/ba-p/2466930">Microsoft Entra ID Governance Introduces Two New Features in Access Reviews</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>2023 年 6 月 7 日に発表されたとおり、<a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/microsoft-entra-id-governance-introduces-two-new-features-in/ba-p/2466930">Microsoft Entra ID Governance</a> が <strong>一般提供</strong> され、これにより企業がよりスムーズにアクセス管理を追求できるようにする一連の新機能が提供されます。これには、Machine Learning (ML) を利用したアクセス レビューの推奨事項と、ユーザーの非アクティブなアクセス レビューのスコープ設定が含まれます。これらの新機能は、アクセス レビュー機能を強化する先進のテクノロジーを活用したもので、レビュー担当者に推奨事項を提供し、非アクティブなアカウントを定期的にレビューして削除することで、セキュリティ管理をシンプルにするものです。</p><p>これらの機能により、いかにして組織が意思決定を行い、重要なリソースを保護できるのか順に見てみましょう。</p><h2 id="機械学習をベースとしたレビュー担当者向けの推奨事項"><a href="#機械学習をベースとしたレビュー担当者向けの推奨事項" class="headerlink" title="機械学習をベースとしたレビュー担当者向けの推奨事項"></a>機械学習をベースとしたレビュー担当者向けの推奨事項</h2><p>アクセス レビューは、組織内で適切なユーザーが適切なアクセス許可を持つようにする上で、重要な役割を果たします。しかし、レビュー担当者にとってこのレビューにおける意思決定プロセスは困難で時間がかかるものです。そこで、機械学習をベースとしたレビュー担当者向けの推奨事項が有用となります。この機能は、機械学習アルゴリズムと組織の階層構造を組み合わせることで、レビュー担当者に推奨事項を提供し、レビュー担当者が十分な情報に基づいた意思決定を迅速に行えるようにします。とはいえ、この推奨事項は重要ではありますが、人工知能 (AI) と機械学習のにはまだ未熟な部分もあることを強調する必要があります。</p><h3 id="シナリオ-レビュー担当者がより迅速かつ正確に判断を下せるようレビュー-プロセスを簡素化したい"><a href="#シナリオ-レビュー担当者がより迅速かつ正確に判断を下せるようレビュー-プロセスを簡素化したい" class="headerlink" title="シナリオ: レビュー担当者がより迅速かつ正確に判断を下せるようレビュー プロセスを簡素化したい"></a>シナリオ: レビュー担当者がより迅速かつ正確に判断を下せるようレビュー プロセスを簡素化したい</h3><p>アクセス権の確認を一斉に依頼する際に、レビュー担当者に効率的に作業してもらいたいと思うのが常です。アクセス レビューを作成する際、レビュー担当者の意思決定を支援する一環として「ユーザー対グループ」の所属機能を利用いただけます。</p><p><img src="/blog/azure-active-directory/microsoft-entra-id-governance-introduces-two-new-features-in-access-reviews/introduces-two-new-features-in-access-reviews1.png"> </p><p>「ユーザー対グループの所属」の推奨事項は、組織の階層構造も考慮しながら、グループ内の他のユーザーとの相対的な所属関係を分析します。機械学習ベースのスコアリング メカニズムを利用することで、グループ内の他のユーザーとの距離が著しく離れているユーザーを特定し、そのユーザーは “所属度が低い “ことが示されます。 </p><p>レビュー担当者は、アクセス レビューの際、マイ アクセスにこの推奨事項が表示されるようになります。これらの情報は、アクセスの承認または拒否を決定する前に、より詳細な精査が必要な候補者にフラグを立てるのに役立つと共に、レビュー担当者のレビュー効率の向上、確認に伴う疲労の軽減、機密リソースの安全性を確保できるよう支援します。</p><p><img src="/blog/azure-active-directory/microsoft-entra-id-governance-introduces-two-new-features-in-access-reviews/introduces-two-new-features-in-access-reviews2.png"></p><p>これらの情報を元に、レビュー担当者はアクションを起こすことができます。[推奨事項の承認] をクリックして推奨事項を受け入れるオプションがあり、迅速かつ効率的な意思決定が可能になります。あるいは、レビュー担当者が手動で推奨事項を確認し、それに応じてアクセスを承認するか拒否するかを判断することもできます。この機能により、レビュー担当者は十分な情報に基づいた意思決定を行うことができ、同時にアクセス レビューに必要な時間と労力を削減することができます。</p><p>詳しくは、こちらをご覧ください: <a href="https://learn.microsoft.com/ja-jp/azure/active-directory/governance/review-recommendations-access-reviews">アクセス レビューのためのレビューの推奨事項</a></p><h2 id="非アクティブなユーザーのスコープ設定"><a href="#非アクティブなユーザーのスコープ設定" class="headerlink" title="非アクティブなユーザーのスコープ設定"></a>非アクティブなユーザーのスコープ設定</h2><p>利用されていないアカウントは潜在的なセキュリティ リスクを引き起こす可能性があるため、非アクティブなユーザー アカウントの管理は組織にとって重要な課題です。ID ガバナンス機能では、非アクティブなユーザーのスコープ設定の導入により、この課題に対処します。この機能を使用すると、管理者は指定された期間アクティブになっていない古くなったアカウントをレビューし、対処することができます。対話型サインイン アクティビティと非対話型サインイン アクティビティの両方を網羅することで、非アクティブなユーザーのスコープ設定により、ユーザーの活動状態を包括的に確認できるようになります。管理者は、30 日、60 日、90 日などの特定の期間を設定して、非アクティブなアカウントを特定できます。レビュー プロセスの一環として、古くなったアカウントを自動的に削除することもできます。</p><h3 id="シナリオ-重要なグループ内の非アクティブなユーザーを定期的にレビューするよう設定したい"><a href="#シナリオ-重要なグループ内の非アクティブなユーザーを定期的にレビューするよう設定したい" class="headerlink" title="シナリオ: 重要なグループ内の非アクティブなユーザーを定期的にレビューするよう設定したい"></a>シナリオ: 重要なグループ内の非アクティブなユーザーを定期的にレビューするよう設定したい</h3><p>過去 30 日間に Azure AD のどのアプリケーションにも (対話型、非対話型の両方で) サインインしていない監査チームのグループに対して、定期レビューを設定したいと考えています。そのためには、新しいアクセス レビューを作成し、グループを選んで、グループ内のすべてのユーザーを選択し、しきい値を 30 日として、非アクティブなユーザーに対する新しいオプションを選択します。</p><p><img src="/blog/azure-active-directory/microsoft-entra-id-governance-introduces-two-new-features-in-access-reviews/introduces-two-new-features-in-access-reviews3.png"></p><p>非アクティブなユーザー アカウントを削除することで、攻撃の対象範囲が縮小し、不正アクセスのリスクが最小化されるため、組織のセキュリティ体制が向上します。古くなったアカウントを定期的に見直して削除することで、組織はアクセス権限がビジネス要件に適合していることを確認し、無駄のない安全なユーザー環境を維持することができます。</p><h2 id="ぜひお試しください"><a href="#ぜひお試しください" class="headerlink" title="ぜひお試しください"></a>ぜひお試しください</h2><p>これらの新機能をぜひお試しください！現在 Microsoft Entra ID Premium をご利用のお客様は、2 つの方法で新機能をご利用いただけます:</p><ol><li><a href="https://aka.ms/EntraIDGovTrial">https://aka.ms/EntraIDGovTrial</a> で Microsoft Entra ID Governance の試用版をセットアップする。</li><li>Microsoft Entra ID Governance にアップグレードする。ライセンスをオンラインで購入するか、ライセンス パートナー経由で購入するか、Microsoft アカウント チームと連携している場合は Microsoft から直接購入可能です。</li></ol><p>Joseph Dadzie<br>Partner Director of Product Management<br>LinkedIn: <a href="https://www.linkedin.com/in/joedadzie/">@joedadzie</a><br>Twitter: <a href="https://twitter.com/joe_dadzie">@joe_dadzie</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 北村 です。&lt;/p&gt;
&lt;p&gt;本記事は、2023 年 7 月 17 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommuni</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>近日公開予定: macOS 向けの プラットフォーム SSO 機能</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/coming-soon-platform-SSO-for-macOS/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/coming-soon-platform-SSO-for-macOS/</id>
    <published>2023-09-03T03:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.427Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 竜 です。</p><p>本記事は、2023 年 8 月 29 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/coming-soon-platform-sso-for-macos/ba-p/3902280">Coming Soon – Platform SSO for macOS</a> を意訳したものになります。</p><hr><p>今年の初め、<a href="https://learn.microsoft.com/ja-jp/azure/active-directory/develop/apple-sso-plugin">Apple デバイス向けの Microsoft Enterprise SSO プラグイン</a>を企業に提供し、Apple デバイスを使用するお客様のエクスペリエンスを向上させるための大きな一歩を踏み出しました。このプラグインにより、Microsoft Entra ID ユーザーは、すべてのアプリと Web サイトに対して、一貫した、安全でシームレスな方法にて、デバイス全体でシングルサインオン (SSO) を行うことができます。そして何より、最新のMicrosoft の技術に常に対応することができます。</p><p>本日、これらの機能を強化する強力な機能となる “macOS 向けのプラットフォーム SSO” を発表します。この機能強化により、macOS デバイスをこれまで以上にシームレスかつ安全にご利用いただけるようになります。</p><p><img src="/blog/azure-active-directory/coming-soon-platform-SSO-for-macOS/1.png" alt="プラットフォーム SSO  は、macOS の既存の SSO 拡張機能を強化したもので、ユーザーは「パスワードレスの資格情報」または「Microsoft Entra ID によって管理および検証されたパスワード」を使用して Mac にサインインすることができます。"></p><p>プラットフォーム SSO と Microsoft の Enterprise SSO プラグインが組み合わさることで、macOS のプラットフォーム資格情報により、ユーザーは Touch ID を使用してデバイスのロックを解除することでパスワードレスを実現し、さらにデバイスにバインドされた暗号鍵を使用して、Microsoft Entra ID にサインインすることもできるようになります。内部では、Windows Hello for Business で使用している技術を基にしたフィッシングに強い認証情報を使用しており、さらに Apple のハードウェアに搭載されている技術も活用しています。これにより、セキュリティ キーやその他のハードウェアが不要になり、コストを削減することができます。サインイン後は、既存の Microsoft Enterprise SSO プラグインが引き続き機能し、より安全に認証情報を保護しつつ、業務で使用するアプリケーションへのサインイン状態を維持することができます。</p><p>Microsoft Entra ID のサインインでパスワードを全く使用しない準備がまだ整っていない場合でも、macOS 向けのプラットフォーム SSO を使用することで、ローカル アカウントのパスワードと Microsoft Entra ID のパスワードを同期することができます。これで、別々にパスワードを覚える必要がなくなります。</p><p>また、macOS 向けのプラットフォーム SSO では、管理者はエンドユーザーの認証方法を設定することも可能です。フィッシングに強い認証方法または従来のパスワードのどちらかを指定することができます。</p><p><img src="/blog/azure-active-directory/coming-soon-platform-SSO-for-macOS/2.png"></p><h2 id="管理もよりシンプルに"><a href="#管理もよりシンプルに" class="headerlink" title="管理もよりシンプルに"></a>管理もよりシンプルに</h2><p>今回のアップデートの一環として、Microsoft Intune のユーザー向けに、Mac 上での利用者のオンボード体験を刷新しました。macOS 向けのプラットフォーム SSO により、Mac ユーザーが使い慣れた macOS のユーザー体験を活用できるようになり、Microsoft Intune のオンボード体験がよりシンプルになります。この一例として、Intune が管理する Mac 上で、条件付きアクセスで保護されたリソースにアクセスするために Company Portal アプリを起動する必要がなくなります。Microsoft Intune により Apple のデバイス管理がどのように刷新されるかにつきましては、<a href="https://techcommunity.microsoft.com/t5/microsoft-intune-blog/10-ways-microsoft-intune-improves-apple-device-management/ba-p/3766718">10 ways Microsoft Intune improves Apple device management</a> をご覧ください。</p><p>今後公開されるパブリック プレビューでは、macOS 向けのプラットフォーム SSO は Microsoft Intune と連携して機能します。また、macOS 向けのプラットフォーム SSO と連携して機能するその他の MDM プロバイダーも近日公開予定です。</p><h2 id="ゼロ-トラストを実現するための支援"><a href="#ゼロ-トラストを実現するための支援" class="headerlink" title="ゼロ トラストを実現するための支援"></a>ゼロ トラストを実現するための支援</h2><p>最新の Mac に搭載されている Secure Enclave との統合により、パスワードレスの認証方法は、企業がゼロ トラストのセキュリティ目標を達成するための強力な手段となります。パスワードという主たる攻撃対象を排除することで、企業はセキュリティ体制を大幅に強化することができます。</p><p>パスワードレスの仕組みで使用される認証情報は、物理的なハードウェアにバインドされます。このため、攻撃者はログイン情報を盗むのではなく、特定のハードウェアに物理的にアクセスする必要があり、不正アクセスはさらに困難となります。</p><h2 id="本機能の利用に向けての準備"><a href="#本機能の利用に向けての準備" class="headerlink" title="本機能の利用に向けての準備"></a>本機能の利用に向けての準備</h2><p>現在、一部のお客様を対象としたプライベート プレビューを実施しており、パブリック プレビューは近日中に開始の予定です。プライベート プレビューへの参加をご希望の方は、 <a href="macos-sso-feedback@microsoft.com">Platform SSO for macOS feedback</a> までご連絡ください (参加可能人数に限りがあるのでご了承ください)。</p><p>macOS 向けのプラットフォーム SSO の利用にあたり、以下のとおり準備を進めることが可能です:</p><ol><li><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/develop/apple-sso-plugin">Microsoft Enterprise SSO プラグイン</a>を展開します</li><li>ユーザーが <a href="https://learn.microsoft.com/ja-jp/azure/active-directory/authentication/howto-mfa-getstarted">Microsoft Entra ID 多要素認証</a>に登録されていることを確認します: Microsoft Authenticator の利用をお勧めします。</li><li>macOS デバイスを macOS 13 (Ventura) 以降にアップデートします</li></ol><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>macOS 向けのプラットフォーム SSO  は、組織内の Mac の SSO 体験とセキュリティを強化するための大きな一歩です。ユーザーは、ハードウェアにバインドされたキーまたは Microsoft Entra ID 上のパスワードを使用して Mac にサインインすることで、SSO を実現することができます。さらに、Secure Enclave との統合により、macOS デバイス上でハードウェアにバインドされた、パスワードレスかつ、フィッシングに強い認証が可能になり、企業のゼロ トラスト セキュリティへの移行を推進します。パブリック プレビューでは、macOS 向けのプラットフォーム SSO を Microsoft Intune でネイティブに管理することが可能となり、他の MDM プロバイダーも近日中にサポートされる予定です。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 竜 です。&lt;/p&gt;
&lt;p&gt;本記事は、2023 年 8 月 29 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>あらゆるデータソースから Microsoft Entra ID に ID を同期する新しい方法のご紹介</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/introducing-a-new-flexible-way-of-bringing-identities-from-any/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/introducing-a-new-flexible-way-of-bringing-identities-from-any/</id>
    <published>2023-09-03T00:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.675Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2023 年 8 月 23 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/introducing-a-new-flexible-way-of-bringing-identities-from-any/ba-p/2466927">Introducing a New Flexible Way of Bringing Identities from Any Source into Microsoft Entra ID!</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さんこんにちは。</p><p><strong>Microsoft Entra の API によるプロビジョニング</strong> が <strong>パブリック プレビュー</strong> になったことをお知らせいたします！</p><p>本日の発表により、人事データベースを起点としたプロビジョニングのサポートが拡大され、以下のような最も要望の多かったご要望に対応いたします: </p><ul><li>クラウド専用ユーザーやハイブリッド ユーザー (オンプレミスの Active Directory アカウントが必要なユーザー) を、信頼できるソースから自動的にプロビジョニングする。</li><li>お客様が希望する自動化ツールを使用して、CSV ファイルや SQL の一時テーブルなどからデータをインポートする。</li><li>標準の SCIM のスキーマ属性を使用してシステム間のスキーマの違いを抽象化し、一貫したマッピング体験を提供することで統合をよりシンプルにする。</li><li><a href="https://jpazureid.github.io/blog/azure-active-directory/lifecycle-workflows-ga/">ライフサイクル ワークフロー</a> を活用し、あらゆるシステムから同期されてくるユーザーの入社、異動、退社ワークフローを自動化する。</li></ul><p>ある一般的なお客様シナリオでは、企業が従業員の管理にクラウド人材管理 (HCM) プラットフォームを使用しており、ベンダーや請負業者のデータ管理については、毎晩別途 CSV を生成しているというものがあります。これらのデータ ソースのどちらでも、ご要望の自動化ツールを使用して Microsoft Entra の API ベースのプロビジョニングに情報を送信し、ユーザーを同期できます。プロビジョニングを行う各サービスが、それぞれのユーザーに対して自動的に適切な処理を行うことで、Microsoft <a href="https://jpazureid.github.io/blog/azure-active-directory/lifecycle-workflows-ga/">Entra ID Governance ライフサイクル ワークフロー</a> を組み合わせ、IAM 管理者が指定した入社、異動、退社プロセスを自動化することも可能です。</p><p><img src="/blog/azure-active-directory/introducing-a-new-flexible-way-of-bringing-identities-from-any/figure1.png" alt="図 1: Microsoft Entra の API ベースのプロビジョニングにおけるデータ フロー"></p><h2 id="わずか-3-ステップであらゆるデータソースから-ID-を同期"><a href="#わずか-3-ステップであらゆるデータソースから-ID-を同期" class="headerlink" title="わずか 3 ステップであらゆるデータソースから ID を同期"></a>わずか 3 ステップであらゆるデータソースから ID を同期</h2><h3 id="ステップ-1-API-ベースのプロビジョニング-アプリの構成"><a href="#ステップ-1-API-ベースのプロビジョニング-アプリの構成" class="headerlink" title="ステップ 1 - API ベースのプロビジョニング アプリの構成"></a>ステップ 1 - API ベースのプロビジョニング アプリの構成</h3><p>Microsoft Entra ポータルに、アプリケーション管理者もしくはハイブリッド ID の管理者ロールを持つユーザとしてサインインします。エンタープライズ アプリのギャラリーに 2 つの新しいプロビジョニング アプリケーションが表示されるはずです:</p><ul><li>API-driven Inbound User Provisioning to Azure AD: 信頼できるデータ ソースからクラウド専用のユーザー アカウントをプロビジョニングする場合に <a href="https://learn.microsoft.com/ja-jp/azure/active-directory/app-provisioning/inbound-provisioning-api-configure-app">このアプリを構成</a> します。</li><li>API-driven Inbound User Provisioning to On-Premises AD: まずオンプレミスの Active Directory にユーザー アカウントをプロビジョニングしてから、Microsoft Entra Cloud Sync / Connect Sync を使用して Microsoft Entra ID に同期したい場合は、<a href="https://learn.microsoft.com/ja-jp/azure/active-directory/app-provisioning/inbound-provisioning-api-configure-app">このアプリを構成</a> します。</li></ul><p>プロビジョニングの対象がオンプレミスの Active Directory ドメインの場合は、<a href="https://learn.microsoft.com/ja-jp/azure/active-directory/hybrid/cloud-sync/how-to-install">Microsoft Entra プロビジョニング エージェント</a> をダウンロードして設定ください。設定後に、プロビジョニング アプリで Active Directory ドメインを選択できます。</p><p><img src="/blog/azure-active-directory/introducing-a-new-flexible-way-of-bringing-identities-from-any/figure2.png" alt="図 2: オンプレミス Active Directory ドメインに接続する"></p><p>既定では、プロビジョニング アプリは、標準の <a href="https://www.rfc-editor.org/rfc/rfc7643.html#section-4.1">SCIM Core User スキーマ</a> と <a href="https://www.rfc-editor.org/rfc/rfc7643.html#section-4.3">SCIM Enterprise User スキーマ拡張</a> を、対応する Microsoft Entra ID / オンプレミス Active Directory ユーザー属性にマッピングします。</p><p><img src="/blog/azure-active-directory/introducing-a-new-flexible-way-of-bringing-identities-from-any/figure3.png" alt="図 3: SCIM のスキーマ属性マッピングをオンプレミスの AD 属性に対して行う"></p><p>Microsoft Entra のプロビジョニング サービスにより、プロビジョニング アプリ用に固有の API エンドポイントが作成されます。この API エンドポイントの値を “概要” ブレードからコピーいただけます。[プロビジョニングの開始] を選択すると、この API エンドポイントでインバウンド プロビジョニングの要求を受け付けるようになります。</p><p><img src="/blog/azure-active-directory/introducing-a-new-flexible-way-of-bringing-identities-from-any/figure4.png" alt="図 4: プロビジョニング アプリ用の API エンドポイント"></p><p>インバウンド プロビジョニング API のエンドポイントは以下の形式となります:</p><p><a href="https://graph.microsoft.com/beta/servicePrincipals/%7BservicePrincipalId%7D/synchronization/jobs/%7BjobId%7D">https://graph.microsoft.com/beta/servicePrincipals/{servicePrincipalId}/synchronization/jobs/{jobId}</a>…</p><p>ここで {servicePrincipalId} はプロビジョニング アプリのオブジェクト ID を表し、{jobId} はプロビジョニングのジョブ ID を表します。</p><h3 id="ステップ-2-アプリまたはサービスに-ID-データのアップロード権限を付与"><a href="#ステップ-2-アプリまたはサービスに-ID-データのアップロード権限を付与" class="headerlink" title="ステップ 2 - アプリまたはサービスに ID データのアップロード権限を付与"></a>ステップ 2 - アプリまたはサービスに ID データのアップロード権限を付与</h3><p>このステップでは、インバウンド プロビジョニング API を呼び出すアプリまたはサービスを Microsoft Entra ID に登録し、必要なアクセス許可を付与します。次のいずれかの方法が利用可能です:</p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/app-provisioning/inbound-provisioning-api-grant-access#configure-a-service-principal">サービス プリンシパルを構成する</a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/app-provisioning/inbound-provisioning-api-grant-access#configure-a-managed-identity">マネージド ID を構成する</a></li></ul><p>管理者の同意機能を用いて、以下の Graph API のアクセス許可を付与します:</p><ul><li>SynchronizationData-User.Upload  </li><li>AuditLog.Read.All</li></ul><p><img src="/blog/azure-active-directory/introducing-a-new-flexible-way-of-bringing-identities-from-any/figure5.png" alt="図 5: API ベースのプロビジョニングを行うために必要なアクセス許可"></p><h3 id="ステップ-3-お好みの自動化ツールを使用して-ID-データをアップロード"><a href="#ステップ-3-お好みの自動化ツールを使用して-ID-データをアップロード" class="headerlink" title="ステップ 3 - お好みの自動化ツールを使用して ID データをアップロード"></a>ステップ 3 - お好みの自動化ツールを使用して ID データをアップロード</h3><p>これで、プロビジョニング (/bulkUpload) API エンドポイントに ID データを安全にアップロードする準備が整いました。API ベースのプロビジョニングの優れた点は、ユーザー データが存在するシステム側において、ID の作成もしくは更新のどちらが必要かを判断するカスタム ロジックの実装が必要ないことです。同期元のシステムからデータをアップロードするだけで、IAM 管理者によって設定されたマッピングルールに基づいて Microsoft Entra のプロビジョニング サービスが各ユーザー レコードに対する適切な操作を自動的に決定および実行します。</p><h2 id="その他の統合シナリオ"><a href="#その他の統合シナリオ" class="headerlink" title="その他の統合シナリオ"></a>その他の統合シナリオ</h2><p>上記のステップでは、クラウド上の Microsoft Entra ID とオンプレミスの Active Directory にプロビジョニングする方法を紹介しました。これらの手順を適用して、さらにいくつかエンタープライズの人事統合シナリオを実現することができます。</p><h3 id="シナリオ-1-IT-チームがあらゆるソースから人事データの抽出結果をインポート"><a href="#シナリオ-1-IT-チームがあらゆるソースから人事データの抽出結果をインポート" class="headerlink" title="シナリオ 1: IT チームがあらゆるソースから人事データの抽出結果をインポート"></a>シナリオ 1: IT チームがあらゆるソースから人事データの抽出結果をインポート</h3><p>エンタープライズの統合シナリオでは、単純なテキスト ファイル、CSV ファイル、SQL の一時テーブルが一般的に使用されます。従業員、請負業者、およびベンダー情報は、定期的にこれらのフォーマットのいずれかにエクスポートされ、自動化ツールを使用して Microsoft Entra ID と同期されます。API ベースのプロビジョニングにより、IT チームは任意の自動化ツール (例: PowerShell スクリプトまたは Azure Logic Apps) を使用して、このようなデータ統合をよりシンプルに実現できます。</p><h3 id="シナリオ-2-人事情報を扱うソフトウェア-ベンダーが-Microsoft-Entra-ID-と直接インバウンド同期を構築"><a href="#シナリオ-2-人事情報を扱うソフトウェア-ベンダーが-Microsoft-Entra-ID-と直接インバウンド同期を構築" class="headerlink" title="シナリオ 2: 人事情報を扱うソフトウェア ベンダーが Microsoft Entra ID と直接インバウンド同期を構築"></a>シナリオ 2: 人事情報を扱うソフトウェア ベンダーが Microsoft Entra ID と直接インバウンド同期を構築</h3><p>API ベースのプロビジョニングにより、人事情報を扱うソフトウェア ベンダーはネイティブな同期処理を提供し、人事データベースの変更を自動的に Microsoft Entra ID およびオンプレミスの Active Directory ドメインに取り込むようにすることが可能となります。例えば、人事アプリや学生情報システムのアプリでは、トランザクションが完了するとすぐに、または一日の終わりに一括更新として Microsoft Entra ID にデータを送信するということもできます。</p><h3 id="シナリオ-3-システム-インテグレータが同期元システム用により多くのコネクターを構築"><a href="#シナリオ-3-システム-インテグレータが同期元システム用により多くのコネクターを構築" class="headerlink" title="シナリオ 3: システム インテグレータが同期元システム用により多くのコネクターを構築"></a>シナリオ 3: システム インテグレータが同期元システム用により多くのコネクターを構築</h3><p>システム インテグレータは、同期元システムから Microsoft Entra ID への ID データの流れに関するさまざまな統合要件を満たすため、カスタムの人事データ連携コネクターを構築することができます。</p><h2 id="お客様やパートナーの声"><a href="#お客様やパートナーの声" class="headerlink" title="お客様やパートナーの声"></a>お客様やパートナーの声</h2><p>プレビューでは、お客様やパートナー様から素晴らしいフィードバックをいただいております。</p><p><strong>Microsoft Entra の API ベースのプロビジョニングにより、クラウドとオンプレミスで直接 ID をプロビジョニングし、人事アプリケーションと統合することで、クラウド ファーストのビジョンを達成することができる見込みです。レガシーなインフラを取り除き、多くのバラバラな状態のワークフローを自動化し、さらにオンプレミス Active Directory インフラへの依存を減らすこともできます。これにより、セキュリティ、効率性、ユーザー体験を向上出来ると考えています。</strong><br>Avanade 社 シニア ディレクター Sachin Desai 氏</p><p><strong>API ベースのプロビジョニングにより、人事部が Active Directory と Microsoft Entra ID の ID ライフサイクルとデータをよりよく管理できるようになりました。Lifecycle Workflows の機能と組み合わせることで、入社と離職の処理が簡単かつシームレスになり、手作業がなくなることで、常に最新の ID 状態を保つことができるようになります！</strong><br>InSpark 社 プリンシパル コンサルタント および Microsoft Most Valuable Professional (MVP) Pim Jacobs 氏</p><p><strong>Microsoft Entra の API ベースのインバウンド プロビジョニングは、既存の技術により制約を受けている顧客にとって非常に有用な機能であり、あらゆる顧客が入社、異動、離職の処理を自動化出来る、そのきっかけとなるものです。</strong><br>Kocho 社 シニア アーキテクト兼チーム リーダー Martyn Gill 氏</p><p><strong>API ベースのプロビジョニングにより、弊社のお客様は SmartHR の従業員情報と Microsoft Entra ID を紐づけできるようになります。これにより、従業員の入社、異動、離職に伴うアカウント管理に必要な時間と労力が削減されます。SmartHR は、この統合の構築においてマイクロソフトと提携できることをうれしく思います！</strong><br>SmartHR 社 プロダクト エンジニア Takumi Kanzaki 氏</p><p><strong>Rippling は、給与、経費、および福利厚生を 1 つの統合プラットフォームで自動化することで、人事、IT、および財務を一括して管理できるようお客様を支援しています。Microsoft Entra の API ベースのプロビジョニングにより、この自動化をさらに広げ、クラウドかオンプレミスかに関係なく、より多くの業務アプリへスムーズにアクセス出来るようになります。マイクロソフトと提携することで、顧客にこのシームレスな体験を提供できることを楽しみにしています！</strong><br>Rippling 社 プロダクト リード Sam Gnesin 氏</p><h2 id="是非お試しください"><a href="#是非お試しください" class="headerlink" title="是非お試しください"></a>是非お試しください</h2><p>この新しい機能により、クラウドまたはオンプレミスのどちらでホストされているかに関係なく、より柔軟にデータ ソースと ID データを同期することが可能となりました。HR/IT チームと連携し、<a href="https://learn.microsoft.com/ja-jp/azure/logic-apps/logic-apps-overview">Azure Logic Apps</a>、<a href="https://learn.microsoft.com/ja-jp/power-automate/getting-started">Power Automate</a>、<a href="https://learn.microsoft.com/ja-jp/azure/azure-functions/functions-overview?pivots=programming-language-csharp">Azure Functions</a>、<a href="https://learn.microsoft.com/ja-jp/azure/data-factory/introduction">Azure Data Factory</a> などの自動化ツールを用いて、人事データを取得、変換、マージして、新しいプロビジョニング API エンドポイントにデータをアップロード出来るようになります。</p><p>お好みの API テスト ツールを用いて API ベースのプロビジョニングを構成し、評価できますので、その際は以下のチュートリアルのいずれかを参照ください:</p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/app-provisioning/inbound-provisioning-api-curl-tutorial">cURLを使ったクイック スタート</a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/app-provisioning/inbound-provisioning-api-postman">Postman を使用したクイック スタート </a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/app-provisioning/inbound-provisioning-api-graph-explorer">Microsoft Graph Explorer を使用したクイック スタート</a></li></ul><p>その他の自動化ツールで評価を始めるには、以下のサンプルのいずれかを参照ください:</p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/app-provisioning/inbound-provisioning-api-powershell">PowerShell による API ベースのプロビジョニングの実装</a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/app-provisioning/inbound-provisioning-api-logic-apps">Azure Logic Apps による API ベースのプロビジョニングの実装</a></li></ul><p><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/app-provisioning/inbound-provisioning-api-concepts">API ベースのプロビジョニング</a> 機能はプレビューであり、Microsoft Entra ID P1 (旧 Azure AD Premium P1) 以上のライセンスがあれば利用を開始できます。ライセンス条件は一般提供 (GA) 開始時に公開されます。</p><p>ご質問がある場合は、<a href="https://learn.microsoft.com/ja-jp/azure/active-directory/app-provisioning/inbound-provisioning-api-faqs">よくある質問</a> をご覧ください。</p><p>また、皆様からのフィードバックもお待ちしております！<a href="https://aka.ms/AzureADFeedback">Azure フォーラム</a>、または Twitter で <a href="https://twitter.com/azuread">@AzureAD</a> をタグ付けして、フィードバックを共有ください。  </p><p>Joseph Dadzie - Partner Director of Product Management<br>LinkedIn: <a href="https://www.linkedin.com/in/joedadzie/">@joedadzie</a><br>Twitter: <a href="https://www.linkedin.com/in/joedadzie/">@joe_dadzie</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2023 年 8 月 23 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>保護されたアクションのための条件付きアクセスが一般提供 (GA) されました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/conditional-access-for-protected-actions/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/conditional-access-for-protected-actions/</id>
    <published>2023-09-02T00:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.455Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 三輪 です。 </p><p>本記事は、2023 年 8 月 8 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/conditional-access-for-protected-actions-is-now-generally/ba-p/3888723">Conditional Access for Protected Actions is Now Generally Available! - Microsoft Community Hub</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/roles/protected-actions-overview">保護されたアクションのための条件付きアクセス</a> の <strong>一般提供 (GA)</strong> をお知らせいたします！ この強力な機能により、お客様の組織にて条件付きアクセス ポリシーを使用することで、重要な管理操作に追加の保護機能を適用することができるようになります。</p><p>保護されたアクションとは、重大なリスクを伴う重要な操作を指しており、例えば条件付きアクセス ポリシーの変更、アプリケーションへの資格情報の追加、またはフェデレーション信頼の設定変更などが挙げられます。これらのアクションが悪意のある攻撃者によって実行された場合、組織のセキュリティ体制が大きく損なわれる可能性があります。</p><p>条件付きアクセスの保護されたアクション機能を使用することで、組織は機密性の高い操作に追加の保護レイヤーを付加することができます。具体的には、きめ細かいポリシーを定義して、ユーザーによる保護されたアクションの実行条件を指定することができるようになります。例えば、組織は管理者に対して、フィッシングに強い MFA の完了や、準拠したデバイスの使用、もしくは信頼できる場所からのアクセスを条件として指定できます。これにより、攻撃者が管理者アカウントへのアクセスを獲得した場合でも、追加のセキュリティ基準を満たさない限り、条件付きアクセス ポリシーの変更などリスクの高いアクションを実行することはできなくなります。</p><p>以下は、保護されたアクションのためのポリシーの例です:</p><ul><li>管理者が条件付きアクセス ポリシーを削除するためには特権アクセス ワークステーションと FIDO2 キーが必要である。</li><li>管理者がネットワークの場所を定義または変更するためにはフィッシングに強い MFA の完了が必要である。</li></ul><p><img src="/blog/azure-active-directory/conditional-access-for-protected-actions/screen_shot.png"></p><p>上の図は、”Require_Passwordless MFA” の認証コンテキストに、5 件の保護されたアクションを追加した例です。これにより、条件付きアクセス ポリシーで、”Require_Passwordless MFA” の認証コンテキストが割り当てられたユーザーは、上の図で追加されている保護されたアクションを実行する際に、パスワードレス MFA を完了する必要が生じます。このように、特定の管理操作 (アクション) に対してきめ細かく要件を定義することが可能となります。</p><p>現在、本機能が対応している保護されたアクションは以下のとおりです。</p><ul><li>条件付きアクセス ポリシーの管理</li><li>ネットワークの場所を定義するカスタム ルールの管理</li><li>保護されたアクションの管理</li></ul><p>今後、追加を予定している保護されたアクションは以下のとおりです。</p><ul><li>Microsoft Entra Connect の管理</li><li>テナント間アクセス ポリシーの管理</li><li>アプリとサービス プリンシパルの登録における資格情報とアクセス許可の管理</li></ul><p>引き続き、お客様からのフィードバックに基づいて、本機能の対象とする保護されたアクションのアクセス許可を追加していきます。是非、「保護されたアクションのための条件付きアクセス」機能をご活用いただき、ご意見をお聞かせください！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 三輪 です。 &lt;/p&gt;
&lt;p&gt;本記事は、2023 年 8 月 8 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommuni</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>パブリック プレビュー: 継続的アクセス評価における場所に基づくポリシーの厳密な適用</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/public-preview-strictly-enforce-location-policies-with-contiunuous-access-evaluation/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/public-preview-strictly-enforce-location-policies-with-contiunuous-access-evaluation/</id>
    <published>2023-08-25T00:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.867Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2023 年 7 月 28 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/public-preview-strictly-enforce-location-policies-with/ba-p/3773133">Public Preview: Strictly Enforce Location Policies with Continuous Access Evaluation</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>先日の Microsoft Secure イベントでは、継続的アクセス評価 (CAE) により場所に基づくポリシーを厳密に適用し、IP アドレスの場所を使用したポリシーに違反するトークンを迅速に無効化する条件付きアクセスの新機能をいち早くご紹介しました。本日、この機能のパブリック プレビューを発表できることを嬉しく思います。</p><p>これまでは、アクセス トークンが盗まれた場合、攻撃者は条件付きアクセス ポリシーで許可された場所の範囲外であるかどうかに関係なく、トークンが更新されるまでの間、そのトークンを悪用することができました。場所に基づくポリシーと CAE を厳密に適用できるようになったことで、Exchange Online、SharePoint、Teams、Microsoft Graph などの CAE に対応するアプリケーションは、アプリケーション側でネットワーク変更イベントを検出して、ほぼリアルタイムでトークンを失効させることができるようになりました。これにより、盗まれたトークンが信頼されたネットワーク外で再利用されることを防ぐことが可能となります。</p><p>CAE の「場所ポリシーを厳密に適用する」ポリシーがトリガーされ、クライアントのリソースへのアクセスがブロックされた場合、以下のような画面が表示され、そのクライアントはブロックされます。</p><p><img src="/blog/azure-active-directory/public-preview-strictly-enforce-location-policies-with-contiunuous-access-evaluation/public-preview-strictly-enforce-location-policies-with-contiunuous-access-evaluation1.png" alt="条件付きアクセスによりブロックされたときの画面"></p><h2 id="この機能の有効化方法"><a href="#この機能の有効化方法" class="headerlink" title="この機能の有効化方法"></a>この機能の有効化方法</h2><h3 id="「場所ポリシーを厳密に適用する」を有効にする"><a href="#「場所ポリシーを厳密に適用する」を有効にする" class="headerlink" title="「場所ポリシーを厳密に適用する」を有効にする:"></a>「場所ポリシーを厳密に適用する」を有効にする:</h3><p><img src="/blog/azure-active-directory/public-preview-strictly-enforce-location-policies-with-contiunuous-access-evaluation/public-preview-strictly-enforce-location-policies-with-contiunuous-access-evaluation2.png" alt="条件付きアクセスの設定画面"></p><p>CA で「場所ポリシーを厳密に適用する」を有効にする前に、ユーザーが Microsoft Entra ID とリソース プロバイダーにアクセスする際のすべての IP アドレスが IP ベースのネームド ロケーション ポリシーに含まれていることをご確認ください。ネームド ロケーションへの登録が漏れている場合、ユーザーを誤ってブロックしてしまう可能性があります。CAE Workbook またはサインイン ログを使用して、どの IP アドレスが CAE のリソース プロバイダーから参照されているかを調べることが可能です。 </p><h3 id="CAE-Workbook"><a href="#CAE-Workbook" class="headerlink" title="CAE Workbook:"></a>CAE Workbook:</h3><p><img src="/blog/azure-active-directory/public-preview-strictly-enforce-location-policies-with-contiunuous-access-evaluation/public-preview-strictly-enforce-location-policies-with-contiunuous-access-evaluation3.png"></p><h3 id="サインイン-ログ"><a href="#サインイン-ログ" class="headerlink" title="サインイン ログ:"></a>サインイン ログ:</h3><p><img src="/blog/azure-active-directory/public-preview-strictly-enforce-location-policies-with-contiunuous-access-evaluation/public-preview-strictly-enforce-location-policies-with-contiunuous-access-evaluation4.png" alt="&quot;IP アドレス&quot; の列が &quot;Azure AD から見える IP アドレス&quot; を指しており、&quot;リソースから見える IP アドレス&quot; とは異なることにご注目ください。"></p><p>「場所ポリシーを厳密に適用する」の設定をテストいただく際は、CAE のリソース プロバイダー観点で未許可となっている IP を持つユーザーがブロックされることがないよう、リソースから見える IP “IP address (seen by resource)” のフィルターを利用することを検討ください。</p><p>場所に基づくポリシーの厳密な適用機能は、より良いセッション管理に向けたさらなる一歩です。この機能を有効にする際には、CAE Workbook とサインイン ログを活用して、ユーザーが Microsoft Entra ID とリソース プロバイダーにアクセスする際の安全で信頼できる IP アドレスを設定に含めるよう慎重に検討し、意図しないブロックが発生しないようにご注意ください。</p><p>Alex Weinert (<a href="https://techcommunity.microsoft.com/t5/user/viewprofilepage/user-id/15847">@Alex</a>_T_Weinert)<br>VP Director of Identity Security, Microsoft</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2023 年 7 月 28 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techc</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra ID Protection の新機能</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/what-s-new-with-microsoft-entra-id-protection/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/what-s-new-with-microsoft-entra-id-protection/</id>
    <published>2023-08-20T00:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.979Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームです。</p><p>本記事は、2023 年 7 月 31 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/what-s-new-with-microsoft-entra-id-protection/ba-p/3773132">What’s new with Microsoft Entra ID Protection</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>拡大しつづけるデジタル世界において、ID は最も攻撃される領域であり、攻撃の巧みさと頻度も増し続けています。手動による調査や対応では到底このペースには追い付くことはできません。ID を侵害から守り、今後生じる脅威に迅速に対応していくためには、考え方を変える必要があります。</p><p>Microsoft Entra ID Protection (旧名: Azure AD Identity Protection) は攻撃が発生する前に、それを抑止するツールです。Microsoft Entra ID Protection は乗っ取りをリアルタイムに防ぎ、進化した機械学習による検知、リスクベースのアクセス ポリシー、そして総合的なリスク レポートと分析情報によって自動的に攻撃から防御します。最新技術でお客様を保護するために、この度、Microsoft Entra ID Protection の主要な強化機能を発表できることをうれしく思います。この機能強化では、鍵となる分析情報を提供する新しいダッシュボード、既知の攻撃をブロックする新しい検知の仕組み、生じうる脅威からユーザーを迅速に保護するための新しい仕組み、そして、Microsoft 365 Defender との統合が行われます。それぞれの新しい機能の詳細については以下をご参照ください。</p><h2 id="新しいダッシュボード"><a href="#新しいダッシュボード" class="headerlink" title="新しいダッシュボード"></a>新しいダッシュボード</h2><p>Microsoft Entra ID Protection の刷新されたダッシュボードをこの度公開いたします。このダッシュボードにより、ID の管理者と IT 担当者はセキュリティの状態をよりよく把握でき、ID の侵害に対してより効率的に対応が取れるようになります。</p><p><img src="/blog/azure-active-directory/what-s-new-with-microsoft-entra-id-protection/pic1.png" alt="新しい Microsoft Entra ID Protection のダッシュボード"></p><p>最新のダッシュボードでは、詳細を把握可能なビジュアル化に加え、実際に行動に移せる形で推奨情報を提供します。これらの情報により、ID を担当するチームでは、”我々の組織はどのように保護されているのか？” や “我々の組織にどのような攻撃が仕掛けられているのか？”、”それらの攻撃にどのように対応すべきか？” というような問いに答えられるようになります。</p><p><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/identity-protection/concept-identity-protection-policies">リスクベースの条件付きアクセス ポリシー</a> と強力な認証ポリシーを利用することにより、テナントの保護をさらに強化できます。お客様からは、これまで自らの組織がどれほどうまく保護されているのかという情報が欲しいという要望をいただいておりましたので、この度、お客様が構成済みの保護機能の有効性を示す <strong>4 つのキー メトリクス</strong> を提供することといたしました。<strong>ブロックされた攻撃の数</strong> と <strong>保護されているユーザーの数</strong> のメトリクスではセキュリティ対策の効果を示し、<strong>ユーザー リスクを修復するための平均時間</strong> では組織の攻撃への応答時間と侵害からの回復時間を確認できます。リスクベース ポリシーやセルフサービス パスワード リセットを採用することによって、回復速度を劇的に短縮し、セキュリティと運用効率を向上させることができます。最後に、<strong>危険度の高いユーザーの数</strong> では、アカウント侵害のリスクがどれだけ続いているかを確認できます。</p><p><img src="/blog/azure-active-directory/what-s-new-with-microsoft-entra-id-protection/pic2.png" alt="Microsoft Entra ID Protection のキー メトリクスの月間推移"></p><p>また、晒されているリスクの状況と脆弱な箇所を示すために、<strong>攻撃の状況を示すグラフ</strong> を表示することとしました。過去 30 日に検知された一般的な ID ベースの攻撃パターンや、さらに重要なこととして、ブロックに成功した攻撃数と復旧を必要とする ID 数を視覚化しました。先進の機械学習の検知により、漏洩した資格情報や匿名トークン、パスワード スプレー攻撃などの情報を元に攻撃パターンが特定されます。</p><p><img src="/blog/azure-active-directory/what-s-new-with-microsoft-entra-id-protection/pic3.png" alt="お客様のテナントにおける攻撃の状態を示すグラフ"></p><p>効果的な対策を講じれるよう、晒されたリスクに基づいてカスタマイズされた <strong>推奨事項</strong> を提供します。例えば、少なくとも 20 名の危険なユーザーがテナントへアクセスした場合 (アカウントが侵害された可能性がある場合) ユーザー リスク ポリシーを利用してこれらのユーザーアカウントを効果的かつ効率的に安全な状態に戻すという推奨案が提案されます。攻撃状態を示すグラフと推奨事項を組み合わせて、セキュリティ体制を強化するための的確な取り組み内容を提案します。  </p><p><img src="/blog/azure-active-directory/what-s-new-with-microsoft-entra-id-protection/pic4.png" alt="リスクに応じた推奨事項の内容"></p><p>また、地理的にリスク イベントの発生元を示すために <strong>地図</strong> の表示も取り入れました。この動的な地図を用いることで、組織に対する脅威をグローバル的な視点から示します。</p><p><img src="/blog/azure-active-directory/what-s-new-with-microsoft-entra-id-protection/pic5.png" alt="リスク イベントの発生個所を地理的に示す新しい地図の表示"></p><p>最後に <strong>最新のアクティビティ</strong> 機能はテナントでの直近のリスク関連のアクティビティの要約を提供します。疑わしい振る舞いを特定するために管理者またはユーザーによりどのような推奨事項が対応されたかなどのアクティビティを確認できます。</p><p><img src="/blog/azure-active-directory/what-s-new-with-microsoft-entra-id-protection/pic6.png" alt="Micorosft Entra ID Protection のダッシュボードに表示された最近のアクティビティ"></p><p>新しいダッシュボードにより、組織のセキュリティを強化するためのアクセスしやすく、分かりやすい解析情報が導き出されるため、ID 担当チームにとって非常に貴重な助けになると思われます。管理者または SOC (Security Operation Center) チームは日々の業務ではもちろん、ビジネス インパクトを示すために経営層に情報を共有するためにもこれらの情報を利用いただけます。</p><p>ダッシュボード機能は現在プレビューではありますが、ぜひお試しいただきたいです！</p><h2 id="新しい高度な検出機能"><a href="#新しい高度な検出機能" class="headerlink" title="新しい高度な検出機能"></a>新しい高度な検出機能</h2><p>Microsoft Entra ID Protection の開発において、弊社では悪意のある攻撃者やアクティビティから環境を保護するため、新しい検知機能を提供できるよう努めています。Microsoft の持つ広範な脅威インテリジェンスの情報を活用して、この度 2 つの <strong>高精度</strong> の検知機能をリリースします。これらの検知機能をリスクベースの条件付きアクセスポリシーと組み合わせることにより、攻撃をより早い段階で阻止できるようにします。</p><p>1 つ目の検知は <strong>検証済み脅威アクター IP</strong> です。過去数年にわたり、多くの重大なセキュリティ インシデントが国家による攻撃者またはサイバー犯罪グループによって引き起こされたことがわかっています。Microsoft の様々なセキュリティ チームによる調査結果を活用することによって、これらの攻撃者についてのナレッジ データベースを作成し、これらの攻撃者によりサインインが行われた際には、リアルタイムのサインイン リスクを検出できるようになります。</p><p><img src="/blog/azure-active-directory/what-s-new-with-microsoft-entra-id-protection/pic7.png" alt="ユーザーリスク検知の詳細"></p><p>2 つ目は <strong>中間者攻撃</strong> です。ユーザーのアクセス権を取得し、アカウントを侵害する一般的な手法はフィッシングであり、通常は偽のログイン ページにユーザーを誘導して資格情報を入力させ、入手した認証方法を Microsoft Entra ID に横流しして利用します。仮にユーザーに多要素認証 (MFA) が要求されても、いつもどおりの認証操作であるため、ユーザーはそのまま認証を完了する可能性が高いです。これによって攻撃者に認証済みのセッションと、以降に攻撃に利用できる資格情報を提供してしまいます。</p><p>Microsoft 365 Defender からのシグナルと Microsoft Entra ID からのデータを組み合わせることで、このような攻撃を正確に検知し、対象となるサインインとユーザーに <strong>Azure AD 脅威インテリジェンス</strong> のリスクを割り当てるようにします。これにより、パスワード リセットを強制することによってセッションを破棄させ、ユーザーの資格情報がその後悪用させるのを抑止します。</p><p>両検知機能はすでに Microsoft Entra ID のお客様にて利用可能です。</p><h2 id="リアルタイムな-Azure-AD-脅威インテリジェンス"><a href="#リアルタイムな-Azure-AD-脅威インテリジェンス" class="headerlink" title="リアルタイムな Azure AD 脅威インテリジェンス"></a>リアルタイムな Azure AD 脅威インテリジェンス</h2><p>新たに発生する ID ベースの攻撃からお客様を保護するために、Microsoft Entra ID Protection にてリアルタイムな Azure AD 脅威インテリジェンスを提供いたします。新しい攻撃パターンが判明したときに、迅速に新しいリアルタイム検知機能を Microsoft Entra ID Protection に追加し、これら新しい攻撃に対抗できるようになりました。これらの検知は Microsoft の脅威インテリジェンスをリアルタイムに活用するため、Microsoft Entra ID Protection がサインインの時点で侵害パターンを特定/検知して、リスク ベースの条件付きアクセスポリシーを利用することで ID を保護することができます。</p><p>ユーザーのサインインの処理において、サインイン情報がリアルタイム脅威インテリジェンス検知のパターンにマッチすると、Microsoft Entra ID Protection のリアルタイム リスク評価エンジンが検知を報告し、サインインとユーザーのリスク レベルを上げて、お客様が構成したリスク ベースの条件付きアクセスポリシーに従い、ブロックまたはユーザーへの認証要求を強制します。これにより、悪意ある攻撃から組織が保護されます。</p><p>リアルタイムな脅威インテリジェンスの検知について詳細を確認するには、検知内容の追加情報の欄をご覧ください。</p><p><img src="/blog/azure-active-directory/what-s-new-with-microsoft-entra-id-protection/pic8.png"></p><h2 id="一般提供-Microsoft-Entra-ID-Protection-と-Microsoft-365-Defender-との統合"><a href="#一般提供-Microsoft-Entra-ID-Protection-と-Microsoft-365-Defender-との統合" class="headerlink" title="一般提供: Microsoft Entra ID Protection と Microsoft 365 Defender との統合"></a>一般提供: Microsoft Entra ID Protection と Microsoft 365 Defender との統合</h2><p><strong>Microsoft Entra ID Protection と Microsoft 365 Defender との統合が一般提供となりました</strong> ことを発表いたします。Microsoft Entra ID Protection のアラートは高度な検知アルゴリズムによって生成され、侵害された ID を特定するための重要な指標となります。これらのアラートは Microsoft 365 Defender にも表示され、他のセキュリティ機能から報告された <strong>インシデント</strong> とも関連付けられます。セキュリティを担当するチームは、効率的かつ効果的にインシデントを調査でき、攻撃の全体像を理解すると共に、ID の侵害に対して迅速に対処出来ます。</p><p>これらのアラートは Microsoft 365 Defender Incident API でも取得でき、Microsoft Sentinel または他のソリューションに格納されている Microsoft Entra ID Protection のアラートと組み合わせてインシデントを追跡可能です。</p><p><img src="/blog/azure-active-directory/what-s-new-with-microsoft-entra-id-protection/pic9.png"></p><p><img src="/blog/azure-active-directory/what-s-new-with-microsoft-entra-id-protection/pic10.png"></p><p>Microsoft 365 Defender のユーザーのページでは、ユーザーのリスク スコアを確認でき、侵害された可能性のあるユーザーに対してフィードバックを提供できます。調査が完了した場合、インシデントとアラートのステータスが更新され、Microsoft Entra ID Protection に自動的に結果が同期されます。</p><p>このシームレスな統合により、まだ ID が侵害される前の段階で、攻撃の芽をつぶしておくということが可能になります。<a href="https://security.microsoft.com/">https://security.microsoft.com/</a> と <a href="https://learn.microsoft.com/ja-jp/azure/active-directory/identity-protection/howto-identity-protection-investigate-risk#investigate-risk-with-microsoft-365-defender">ドキュメント</a> を参照し、ぜひ本日から利用を始めていただければ幸いです。この統合に関して改善のフィードバックがありましたらぜひお知らせください。</p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>これらのアップデートにより、Microsoft Entra ID Protection を改善し続けることでさらなる機能強化を行い、お客様に最高の ID セキュリティを提供するという目標により一歩近づくことができました。</p><p>製品の機能を最大に活用するため、お客様におかれましては新しいダッシュボードで提供されるベスト プラクティスと推奨事項に従い、加えてリスクベースの条件付きアクセス ポリシーを展開して、新しく検出された脅威から自動的に保護および復旧することを強くお勧めします。</p><p>Alex Weinert (<a href="https://techcommunity.microsoft.com/t5/user/viewprofilepage/user-id/15847">@Alex_</a>T_Weinert)<br>VP Director of Identity Security, Microsoft</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームです。&lt;/p&gt;
&lt;p&gt;本記事は、2023 年 7 月 31 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommunity.mi</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>ライフサイクル ワークフローが一般提供 (GA) されました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/lifecycle-workflows-ga/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/lifecycle-workflows-ga/</id>
    <published>2023-08-19T00:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.715Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 中村 です。 </p><p>本記事は、2023 年 7 月 14 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/lifecycle-workflows-is-now-generally-available/ba-p/2466931">Lifecycle Workflows is now generally available!</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>2023 年 6 月 7 日に発表しましたとおり、<a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/microsoft-entra-id-governance-is-generally-available/ba-p/2466932">Microsoft Entra ID Governance</a> が、最新の機能の 1 つである <strong>ライフサイクルワークフロー (LCW)</strong> を含め、<strong>一般提供</strong> を開始されました。パブリック プレビュー以降の機能強化や改良を含め、LCW の豊富な機能についてご紹介できることを嬉しく思います。</p><p>ユーザーの ID ライフサイクルは、組織のセキュリティ態勢の重要な部分であり、正しく管理されれば、新入社員 (Joiner)、異動者 (Mover)、離職者 (Leaver) (まとめて JML) のユーザーの生産性にプラスの影響を与えることができます。デジタル トランスフォーメーションが進むにつれ、優れた ID ライフサイクル管理の必要性が高まっています。しかし、IT およびセキュリティ チームは、一度に何百人もの従業員のオンボーディングとオフボーディングが必要となっており、これは複雑で時間がかかり、ミスを犯しやすい手作業のプロセスもあるため大きな課題に直面しています。これは、セキュリティ、ガバナンス、コンプライアンスの各分野でデジタル トランスフォーメーションに直面する IT 管理者が長きにわたり抱える課題です。ID ライフサイクルの課題を詳しく見てみると、以下の点が挙げられます:</p><ol><li>組織のすべての従業員が何かしらへのアクセスを必要としており、管理対象のアプリケーションの数やデータの量が著しく増加しています。これに加えて、規制要件も絶えず増加しています。IT 管理者はこれらの変化に対応するため、スクリプトを使用して JML のプロセスを実施していますが、問題が発生したときのトラブルシューティングは複雑で時間を要します。</li><li>新しいユーザーのオンボーディングには多くの要素が絡み合っています。初日から従業員の生産性を確保するために手動の繰り返しの作業を減らすことは、コスト削減や競争の激しい求人市場において優れた人材を確保する上で重要です。</li><li>サイバー犯罪が激化する中、従業員が組織を離れたり異動した際にアカウントとアクセスを適切なタイミングで削除しないと、組織がより多くのセキュリティの脅威に晒されます。IT 部門がリソースへのアクセス権の追加や削除を手動で行うと時間がかかりすぎてしまうため、遅延やエラーが発生し、コンプライアンスの問題が生じる可能性もあります。</li></ol><p>2022 年の Ignite で、<a href="https://learn.microsoft.com/en-us/azure/active-directory/governance/what-are-lifecycle-workflows">ライフサイクル ワークフロー</a> (LCW) のパブリックプレビューを発表しました。この機能では、自動化されたエンタープライズ レベルのユーザー ライフサイクル管理機能が提供され、組織は ID ライフサイクル管理を刷新し、IT 管理者がこれらの課題に対処するよう支援します。これ以来、世界中の何百もの組織がこの機能を試してフィードバックを提供くださいました。弊社では LCW をさらに改善し、IT 管理者がより多くの時間を節約し、作業ミスを減らし、損失につながる遅延を回避できるようにしました。これにより入社、異動、離職の繰り返しのタスクを自動化し、新しい従業員や役職変更のあった従業員がすぐに生産的になるよう支援できます。また、従業員が組織を離れた際にはアクセスが速やかに削除されたことを確認できるようになっています。</p><p> <img src="/blog/azure-active-directory/lifecycle-workflows-ga/lifecycle-workflows-ga1.png"></p><p> LCW がどのように IT 管理者の重要なタスクを自動化し、時間を節約し、リスクを減らし、そして従業員がより迅速に生産性を発揮できるよう支援しているかを次に探ってみましょう。</p><h2 id="シナリオ-1-新入社員のオンボーディング-プロセスを自動化し初日から生産性を上げる"><a href="#シナリオ-1-新入社員のオンボーディング-プロセスを自動化し初日から生産性を上げる" class="headerlink" title="シナリオ 1: 新入社員のオンボーディング プロセスを自動化し初日から生産性を上げる"></a>シナリオ 1: 新入社員のオンボーディング プロセスを自動化し初日から生産性を上げる</h2><p>通常、新しい従業員のオンボーディングには、IT 部門に対して複数のチケットを手作業で作成し、IT 部門は一連のバラバラのステップを完了する必要があります。結果として、新しい従業員が一部アプリへの必要なアクセス権を得られなかったり、Microsoft Teams のグループ メンバーシップや、最初のサインインに必要な資格情報などが不足してしまうということがよくあります。サービス チケットの処理や、間違いやすく不足しがちなステップの追跡には、IT 管理者にとってかなりの時間と労力がかかるだけでなく、ユーザーの生産性にも悪影響を及ぼします。</p><p>IT 管理者として、あなたにはこのプロセスを適切に管理する責任があります。ライフサイクル ワークフローを使用すると、従業員の開始日に基づいて、ユーザー アカウントを有効にし、新しい従業員にウェルカム メールを送信するとともに、マーケティング グループに従業員を追加し、組み込みの Logic Apps の拡張機能を使用して ServiceNow のチケットを作成するまでのカスタムワークフローをわずか数ステップで作成できます。</p><p>これを実現する方法を見てみましょう！</p><h3 id="ステップ-1-シナリオに適した既定のワークフロー-テンプレートを使用してカスタム-ワークフローを設定する。"><a href="#ステップ-1-シナリオに適した既定のワークフロー-テンプレートを使用してカスタム-ワークフローを設定する。" class="headerlink" title="ステップ 1: シナリオに適した既定のワークフロー テンプレートを使用してカスタム ワークフローを設定する。"></a>ステップ 1: シナリオに適した既定のワークフロー テンプレートを使用してカスタム ワークフローを設定する。</h3><p>Woodgrove の管理者である Lisa は、<a href="https://entra.microsoft.com/#view/Microsoft_AAD_LifecycleManagement/CommonMenuBlade/~/overview">Entra Identity Governance -&gt; Lifecycle Workflows</a> に移動し、[ワークフローの作成] をクリックして、シナリオに合った組み込みのワークフロー テンプレートを選択します。今回の場合、Lisa は [新入社員をオンボードする] ワークフローテンプレート を選んで、新入社員のオンボード シナリオに使用します。</p><p><img src="/blog/azure-active-directory/lifecycle-workflows-ga/lifecycle-workflows-ga2.png" alt="Microsoft Entra ID Governance Lifecycle Workflows を使用して、適切なシナリオに合った組み込みワークフロー テンプレートを選択します。"></p><p>Lisa は、[基本情報] タブからワークフロー名をカスタマイズし、トリガー イベントの詳細がすでに <strong>employeeHireDate 属性</strong>に基づいて<strong>トリガー</strong>されるように設定されていることを確認します。新しいライフサイクル ワークフローの機能強化により、必要に応じて代わりに<strong>ユーザーの作成日</strong>に基づいて<strong>トリガー</strong>を設定することも可能です。トリガー イベントの詳細は最大 180 日までカスタマイズできますが、新入社員のオンボーディングのシナリオでは、テンプレート値が新入社員の employeeHireDate に実行されるように設定されているため、追加の変更は必要ありません。</p><p>Lisa は、[スコープの構成] タブを使用して、ワークフローを特定のユーザーに対象を絞るようにさらにカスタマイズすることもできます。このためには、オンプレミス拡張属性やディレクトリ拡張属性など、サポートされている Azure Active Directory (Azure AD) のユーザープロパティが利用できます。これにより、必要な場合にはアメリカとヨーロッパにいるユーザー向けに異なるワークフローを設定することが可能です。</p><h3 id="ステップ-2-新入社員の初日に実行されるタスクをカスタマイズする。"><a href="#ステップ-2-新入社員の初日に実行されるタスクをカスタマイズする。" class="headerlink" title="ステップ 2: 新入社員の初日に実行されるタスクをカスタマイズする。"></a>ステップ 2: 新入社員の初日に実行されるタスクをカスタマイズする。</h3><p>各ワークフロー テンプレートにはシナリオに対応した <strong>事前定義のタスク</strong> があるため、追加のタスクを構成する必要ありません。管理者は、適切なシナリオに対して、<strong>追加のビルトイン タスク</strong> を使用して、ワークフローをさらにカスタマイズすることができます。また、<strong>カスタムの拡張タスク</strong> を利用して、Microsoft の強力なロー コード ソリューションである <strong>Logic Apps で追加のアクション</strong> を実行することもできます。</p><p>新しいライフサイクル ワークフローの機能強化により、アクセス パッケージの割り当てリクエストを行ったり、 カスタマイズした件名や本文、言語、追加の受信者を CC に追加することに加え、企業のロゴやドメインを含む独自のブランドでカスタマイズされた E メールを作成したりすることも可能です。</p><p>Woodgrove の新入社員に対してやるべきチェックリストのすべての項目を漏れなく確認できるよう、Lisa は <strong>既存の Logic Apps</strong> を活用して、ノート パソコンの配送を依頼する <strong>Service Now チケット</strong> を作成するタスクを追加します。</p><p>Lisa は、Woodgrove の企業ロゴが含まれたウェルカム E メールをカスタマイズし、Woodgrove の新入社員ポータルへのリンクを追加したり、社員が Woodgrove からの E メールであることを認識できるように、新入社員のチームメンバーを CC に入れるなどできるようになりました。</p><p><img src="/blog/azure-active-directory/lifecycle-workflows-ga/lifecycle-workflows-ga3.png" alt="新しくオンボードされた従業員のために、会社のロゴと関連情報が一致するようにウェルカム E メールをカスタマイズできます。"></p><p>Lisa は、すべての変更を確認するために [確認と作成] タブをクリックし、次に [スケジュールの有効化] チェックボックスをクリックして、[作成] をクリックしてワークフローを保存します。ワークフローは、テナントのスケジュールに基づいて自動的に実行され、<strong>実行条件</strong> を満たしたユーザーに対してのみ実行されます。</p><h3 id="ステップ-3-ワークフローのステータスを監視する。"><a href="#ステップ-3-ワークフローのステータスを監視する。" class="headerlink" title="ステップ 3: ワークフローのステータスを監視する。"></a>ステップ 3: ワークフローのステータスを監視する。</h3><p>作成、更新、および処理イベントを含め、ライフサイクル ワークフローによって実行されたすべてのアクションは、監査ログレポートに保存されます。さらに、ライフサイクル ワークフローではワークフローの履歴機能を提供しているため、<strong>詳細なレポーティング機能</strong> により、誰に対して何が実行され、それが成功したかを素早く確認することができます。Lisa は選択したワークフローの <strong>ワークフロー履歴</strong> に移動して、ユーザー、実行、タスクのビューでワークフローの処理ステータスをチェックして、トラブルシューティングやコンプライアンスの目的で利用することができます。</p><p><img src="/blog/azure-active-directory/lifecycle-workflows-ga/lifecycle-workflows-ga4.png" alt="ワークフロー履歴からユーザーのワークフローのステータスを確認してトラブルシューティングとコンプライアンスに活用できます。"></p><h2 id="シナリオ-2-タイムリーにアクセスを削除するために従業員のオフボーディング-プロセスを自動化する。"><a href="#シナリオ-2-タイムリーにアクセスを削除するために従業員のオフボーディング-プロセスを自動化する。" class="headerlink" title="シナリオ 2: タイムリーにアクセスを削除するために従業員のオフボーディング プロセスを自動化する。"></a>シナリオ 2: タイムリーにアクセスを削除するために従業員のオフボーディング プロセスを自動化する。</h2><p>もう 1 つの重要な ID ライフサイクルのシナリオは、従業員のオフボーディングです。退職、離職、競合他社への移籍など、従業員をオフボーディングする必要がある理由はさまざまです。オフボーディングの理由にかかわらず、IT 管理者にとって重要なのは、セキュリティ リスクを低減するために、これらのアカウントを無効にし、すべてのリソース アクセスがタイムリーに元従業員から削除されるようにすることです。</p><p>オフボーディング プロセスが数週間前から計画されている場合でも、リアルタイムで行われる場合でも、更には従業員が退職した後のアクセス削除の場合でも、ライフサイクル ワークフローの <strong>組み込みのオフボーディング ワークフロー テンプレート</strong> を用いることで、プロセスを自動化して柔軟に離職処理を行うことが可能となります。</p><p>Tailspinonline 社の IT 管理者である Vance は、オフボーディング プロセスの管理を担当しています。ライフサイクル ワークフローに組み込まれたオフボーディング テンプレートを使用することで、会社のポリシーに基づいて、事前オフボーディング、リアルタイムのオフボーディング、事後オフボーディングのワークフローを事前に設定し、時間を節約することができます。このケースでは、 Vance は競合他社に移る従業員を迅速にオフボーディングする必要があるため、ユーザー アカウントを無効にするとともに、すべての Azure AD グループと Microsoft Teams から削除して、従業員のアクセスを即座にブロックすることとなります。</p><p>それでは、どのように実現するか見てみましょう！</p><h3 id="ステップ-1-シナリオに適した既定のワークフロー-テンプレートを使用してカスタム-ワークフローを設定する。-1"><a href="#ステップ-1-シナリオに適した既定のワークフロー-テンプレートを使用してカスタム-ワークフローを設定する。-1" class="headerlink" title="ステップ 1: シナリオに適した既定のワークフロー テンプレートを使用してカスタム ワークフローを設定する。"></a>ステップ 1: シナリオに適した既定のワークフロー テンプレートを使用してカスタム ワークフローを設定する。</h3><p>Vance は、<a href="https://entra.microsoft.com/#view/Microsoft_AAD_LifecycleManagement/CommonMenuBlade/~/overview">Entra Identity Governance -&gt; Lifecycle Workflows</a> に移動し、[ワークフローの作成] をクリックして、シナリオに合った組み込みのワークフロー テンプレートを選択します。この場合、退職のシナリオに相当するため、[リアルタイムの従業員の退職] ワークフロー テンプレートを選びます。</p><p><img src="/blog/azure-active-directory/lifecycle-workflows-ga/lifecycle-workflows-ga5.png" alt="ライフサイクル ワークフローには、リアルタイムの従業員解雇など、複数の退職者シナリオのテンプレートが含まれています。"></p><p>Vance は、[基本情報] タブからワークフロー名をカスタマイズし、トリガー イベントの詳細がすでに <strong>オンデマンド トリガーとしてトリガー イベント</strong> で構成されていることを確認します。このテンプレートにより、Vance のような IT 管理者は、選択したユーザーに対してワークフローを即座に実行するか、今設定して後で実行するかを選択できるようになります。</p><p>他のオフボーディング シナリオに対しては、彼は従業員の <strong>employeeLeaveDateTime 属性</strong> に基づいて <strong>トリガー</strong> するように、他の定義済みのワークフロー テンプレートから選択できます。この属性は、人事システムから取得されるとします。</p><h3 id="ステップ-2-従業員に対してリアルタイムに実行するタスクをカスタマイズする。"><a href="#ステップ-2-従業員に対してリアルタイムに実行するタスクをカスタマイズする。" class="headerlink" title="ステップ 2: 従業員に対してリアルタイムに実行するタスクをカスタマイズする。"></a>ステップ 2: 従業員に対してリアルタイムに実行するタスクをカスタマイズする。</h3><p>各ワークフロー テンプレートには、シナリオに応じたタスクが <strong>あらかじめ定義</strong> されているため、追加タスクは必須ではありません。しかし、管理者はニーズに合わせてタスクのリストをカスタマイズすることができます。この場合、Vance はテンプレートに、<strong>ユーザーをすべてのグループと Teams から削除し、ユーザー アカウントを削除する</strong> タスクがすでに定義済みであることを確認できます。Vance の会社のポリシーでは、アカウントはオフボーディング後のプロセスの一部として削除されるため、ユーザー アカウントの削除タスクをここでは削除することとします。次に、<strong>ユーザー アカウントを無効にする</strong> タスクを追加し、<strong>従業員がサインインできない</strong> ようにします。</p><p>このテンプレートは、Vance のような IT 管理者に、<strong>今すぐユーザーを選択</strong> し <strong>ワークフローを実行する</strong> か、今すぐワークフローを作成し、<strong>後でユーザーを選択して実行する</strong> かという選択肢を提供します。[ユーザーの選択] タブから、Vance はユーザーを選択し、[確認と作成] タブをクリックし、全ての変更点を確認した後、[作成] をクリックしワークフローを保存します。ワークフローは直ちに Vance が選択したユーザーの処理を開始します。</p><p><img src="/blog/azure-active-directory/lifecycle-workflows-ga/lifecycle-workflows-ga6.png" alt="リアルタイムの従業員の離職ワークフローにおいて必要に応じて複数のユーザーを選択可能です。"></p><h3 id="ステップ-3-ワークフローのステータスの監視する。"><a href="#ステップ-3-ワークフローのステータスの監視する。" class="headerlink" title="ステップ 3: ワークフローのステータスの監視する。"></a>ステップ 3: ワークフローのステータスの監視する。</h3><p>Vance は、選択したワークフローの <strong>ワークフロー履歴</strong> を開き、進捗状況を監視し、退職処理が処理中であるかを確認することができます。オプションとして、個々のタスクのステータスを確認して、問題をチェックすることも可能です。</p><p><img src="/blog/azure-active-directory/lifecycle-workflows-ga/lifecycle-workflows-ga7.png" alt="リアルタイムな従業員のオフボーディング テンプレートを活用することで、従業員の退職と同時に確実にアクセス権を削除できます。"></p><p>リアルタイムの従業員の退職テンプレートを使用することで、Vance はオフボーディング プロセスを自動化し、従業員の離職時にアクセス権が削除されるようにしました。また、オフボーディング プロセスの各タスクが正常に完了したことをワークフローの履歴で確認することで、組織の重要なデータの保護を支援をしました。</p><p><strong>このような新しいライフサイクル ワークフローの機能強化</strong> により、<strong>より細かいワークフローの実行監査</strong> が可能となりました。いつでも <a href="https://entra.microsoft.com/#view/Microsoft_AAD_LifecycleManagement/CommonMenuBlade/~/auditlogs">ライフサイクル ワークフローの監査ログ</a> または <a href="https://entra.microsoft.com/#view/Microsoft_AAD_ERM/DashboardBlade/~/Audit%20logs">Entra Identity Governance の監査ログ</a> に移動して、ワークフロー実行情報やその他のワークフロー管理アクティビティを確認することができます。</p><h2 id="お客様の声"><a href="#お客様の声" class="headerlink" title="お客様の声"></a>お客様の声</h2><p>プレビュー期間中、お客様やパートナー様から素晴らしいフィードバックをいただきました：</p><blockquote><p>「ライフサイクル ワークフローにより、マイクロソフトの Entra プラットフォームにれまで欠けていた Identity Governance の核となる要素が追加され、顧客が望んでいた自動的な JML(Joiner, Mover and Leaver) のユース ケースの課題が解決されました。これは、Entra をクライアントのシステム内の中心的な ID 管理システムとして使用するための大きな一歩となります。」- Erik Siebler (IAM Lead, DXC) </p></blockquote><p><img src="/blog/azure-active-directory/lifecycle-workflows-ga/lifecycle-workflows-ga8.png"></p><blockquote><p>「ライフサイクル ワークフローの製品ビジョンにこれまで期待を寄せていましたが、ようやく現在の入社、異動、退社のワークフローをレガシーな IAM プラットフォームからクラウド ネイティブの IAM ソリューションに移行する未来が見えてきました。すでにいくつかのワークフローをライフサイクル ワークフローに移行し、O365 ライセンス、SMS、マネージャーへのメール通知を含め、店舗やバックオフィスの従業員のオンボーディングを行っています。」- Maqsood Ali Bhatti (IAM Lead, Elkjøp Nordic AS)</p></blockquote><p><img src="/blog/azure-active-directory/lifecycle-workflows-ga/lifecycle-workflows-ga9.png"></p><blockquote><p>「ライフサイクル ワークフローによって、弊社ではついに、新入社員と退職者のプロセスを自動化して、自身とお客様のビジネスをサポートできるようになりました。この強力で素晴らしい機能により、弊社とお客様は共に Azure AD のアカウントのライフサイクルをコントロールして、アカウントを自動的にプロビジョニングおよびデプロビジョニングできるようになりました。」- Pim Jacobs (Principal Consultant, InSpark)</p></blockquote><p><img src="/blog/azure-active-directory/lifecycle-workflows-ga/lifecycle-workflows-ga10.png"></p><blockquote><p>「どのお客様も ID の管理を難しいと感じていますが、弊社では Logic App を使用したり、ハイブリッドな働き方をする従業員に自動化の仕組みを利用してきました。このライフサイクル ワークフローは、様々な Azure サービスと完璧に統合されており、使ったことがなくてもすでに使い慣れることができるというのが、非常に良い点です。どのお客様でも、アカウントの管理は非常に煩雑であり、ライフサイクル ワークフローを使うことで、サードパーティの ID システムやアクセス管理ソリューションを利用するよりもはるかに少ないステップで、簡単に ID ワークフローの構築を開始することができます。この機能は、今後弊社にとって非常に重要なものになるでしょう。」- Nicola Alig (IAM Lead, BaseVision) </p></blockquote><p><img src="/blog/azure-active-directory/lifecycle-workflows-ga/lifecycle-workflows-ga11.png"></p><h2 id="新機能をぜひお試しください"><a href="#新機能をぜひお試しください" class="headerlink" title="新機能をぜひお試しください"></a>新機能をぜひお試しください</h2><p>この新機能をぜひご利用いただきたいと思います。現在 Microsoft Entra ID Premium をご利用のお客様は、2 つの方法で新機能をご利用いただけます:</p><ol><li><a href="https://aka.ms/EntraIDGovTrial">https://aka.ms/EntraIDGovTrial</a> で Microsoft Entra ID Governance のトライアルをセットアップする。</li><li>Microsoft Entra ID Governance にアップグレードする。この方法の場合、ライセンスをオンラインで購入するか、ライセンスパートナー経由で購入するか、Microsoft アカウントチームと連携している場合は Microsoft から直接購入ください。</li></ol><p>Joseph Dadzie<br>Partner Director of Product Management<br>LinkedIn: <a href="https://www.linkedin.com/in/joedadzie">@joedadzie</a><br>Twitter: <a href="https://twitter.com/joe_dadzie">@joe_dadzie</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 中村 です。 &lt;/p&gt;
&lt;p&gt;本記事は、2023 年 7 月 14 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommun</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Lifecycle Workflows" scheme="https://jpazureid.github.io/blog/tags/Lifecycle-Workflows/"/>
    
  </entry>
  
  <entry>
    <title>登録キャンペーンによる先進的で強力な認証の推進</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/advancing-modern-strong-authentication/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/advancing-modern-strong-authentication/</id>
    <published>2023-08-18T00:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.255Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2023 年 7 月 17 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/advancing-modern-strong-authentication/ba-p/3773135">Advancing Modern Strong Authentication</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>本件の [サインインを改善する] のプロンプトが表示されるアップデートに関しては、Azure AD Free テナントに対しては MC584364 にて、また Azure AD Premium テナントに対しては MC650420 にてアナウンスが行われております。2023 年 8 月 18 日現在、Azure AD Free テナントに対しては本機能の展開が完了しており、MC584364 のメッセージの閲覧可能期限は既に終了している状況です。</p></div><hr><p>以前のブログ <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/it-s-time-to-hang-up-on-phone-transports-for-authentication/ba-p/1751752">“認証に電話網を使うのはそろそろやめよう (It’s Time to Hang Up on Phone Transports for Authentication)”</a> で、SMS や音声などの多要素認証 (MFA) メカニズムの脆弱性について書きました。マイクロソフトの <a href="https://arxiv.org/pdf/2305.00945.pdf">最近の MFA に関する調査研究</a> によると、SMS は <a href="https://www.microsoft.com/ja-jp/security/mobile-authenticator-app">Microsoft Authenticator</a> アプリと比較して、悪意のある攻撃者を阻止する効果が 40％ 低いと結論づけています。</p><p>また、Authenticator の <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/new-microsoft-authenticator-security-features-are-now-available/ba-p/2464386">セキュリティの改善</a> (日本語訳したブログは <a href="https://jpazureid.github.io/blog/azure-active-directory/new-authenticator-security-features/">こちら</a>) にも引き続き取り組んでいます。しかし、電話ベースの認証から脱却することには明確な利点があるにもかかわらず、未だ MFA 要求の約 44% が SMS や音声電話によるものです。悪意のある攻撃者は、電話方式に基づく MFA を悪用し続けているのです。ユーザーを保護するために、是非より強力な認証方法を使用していきましょう。</p><p>本日は、改善に向けて取り組む皆様を支援するために、さらなる取り組みを共有したいと思います。まず、<strong>強力な認証方法の登録キャンペーン機能を改善</strong> し、ユーザーがより良い認証方法を登録できるようにします。そして、FIDO2 のような先進の機能をより多くの環境で利用できるように、<strong>iOS と macOS ブラウザーでの FIDO2 サポート</strong> の一般提供を開始します。</p><h2 id="強力な認証の登録キャンペーン"><a href="#強力な認証の登録キャンペーン" class="headerlink" title="強力な認証の登録キャンペーン"></a>強力な認証の登録キャンペーン</h2><p>2021 年 11 月、Microsoft Authenticator を始めとして最新の認証方法の採用を促進するため、<a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/new-microsoft-authenticator-security-features-are-now-available/ba-p/2464386">登録キャンペーンの機能をリリース</a> しました。リリース以来、何千もの企業がこの機能を利用して最新の認証方法の採用を促進し、130 万人以上のユーザーが Microsoft Authenticator を主要な認証方法として設定し、利用を開始しています。しかしながら、お客様から、最新の強力な認証方法の登録に当たり、より細かく登録動作をコントロールしたいという声をお聞きしました。この声にこたえるため、新しい機能を追加しました。</p><p><img src="/blog/azure-active-directory/advancing-modern-strong-authentication/advancing-modern-strong-authentication1.png" alt="登録キャンペーンのサインイン プロンプト"></p><p>まず始めに、プロンプトのスキップ回数に上限を導入します。最新のアップデートにより、ユーザーは最大 3 回まで登録を延期できるようになります。これにより、キャンペーンの効果を高めつつ、ユーザーは変更に向けて予定や準備に十分な時間をえることができるようになります。</p><p>第二に、設定が “Microsoft マネージド” として設定されている組織の場合、MFA の方法として SMS または音声を利用しているユーザーに対して、この機能を自動的に有効にします。今月 (2023 年 7 月) より、この変更の段階的な展開を開始します。<a href="https://go.microsoft.com/fwlink/p/?linkid=2070717">Microsoft 365 管理センターのメッセージ センター</a> で、管理者に対してこの変更が具体的に組織に影響する時期を通知しますので、ご注目ください。</p><h2 id="iOS-および-macOS-ブラウザーでの-FIDO2-サポートの一般提供開始"><a href="#iOS-および-macOS-ブラウザーでの-FIDO2-サポートの一般提供開始" class="headerlink" title="iOS および macOS ブラウザーでの FIDO2 サポートの一般提供開始"></a>iOS および macOS ブラウザーでの FIDO2 サポートの一般提供開始</h2><p>また、iOS および macOS の Web ブラウザーで、FIDO2 セキュリティキーを使用して Microsoft Entra ID と連携しているアプリケーションにサインインできるようになったことをお知らせします。FIDO2 セキュリティキーは、生体認証要素 (指紋) または PIN によって保護された、強力でフィッシング耐性のある認証を提供します。</p><p>これは、フィッシング耐性のある認証を必要とする大統領令 14028「Improving the Nation’s Cybersecurity (国家のサイバーセキュリティの改善)」に準拠する必要がある米国政府機関など、厳格なコンプライアンス要件がある規制の厳しい組織にとって特に有用です。</p><p><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/authentication/howto-authentication-passwordless-security-key">このページ</a> の指示に従って、FIDO2 セキュリティキーによるパスワードレス サインインを有効化ください。</p><p><img src="/blog/azure-active-directory/advancing-modern-strong-authentication/advancing-modern-strong-authentication2.png" alt="FIDO2 セキュリティキーによるパスワードレス サインイン"></p><p>サポートされるブラウザーのシナリオの詳細については、<a href="https://aka.ms/FIDOMatrix">https://aka.ms/FIDOMatrix</a> (日本語版の公開情報は <a href="https://learn.microsoft.com/ja-jp/azure/active-directory/authentication/fido2-compatibility">こちら</a>) を参照ください。</p><p>この取り組みにより、何百万人ものユーザーがより良い MFA の方法を利用するようになることを願っております。</p><p>Alex</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2023 年 7 月 17 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techc</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>新しい会社のブランド機能が一般公開されました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/company-branding-ga/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/company-branding-ga/</id>
    <published>2023-08-17T00:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.427Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。 Azure ID チームの小出です。</p><p>本記事は、2023 年 7 月 25 日に公開されました  <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/enhanced-company-branding-for-sign-in-experiences-now-generally/ba-p/3823765">Enhanced Company Branding for Sign-in Experiences Now Generally Available</a> の記事をもとに、分かりやすく日本語におまとめしなおした記事となります。ご不明点などございましたらお気軽にサポートまでお問い合わせください。</p><p>今回の記事では、新しく一般公開 (GA) された「強化された新しい会社のブランド機能」について、詳細をご紹介いたします。</p><hr><p>会社のブランド機能は、2022 年 12 月頃に新しい機能が追加され、以前 <a href="https://jpazureid.github.io/blog/azure-active-directory/introducing-enhanced-company-branding-for-sign-in-experiences/">こちら</a> にてパブリック プレビューの開始をお知らせしました。今回、こちらの機能が一般公開されましたので、これまでプレビューを利用していなかった、もしくは利用できなかったお客様もぜひご利用ください。</p><p>新しい会社のブランド機能について少し下記にて紹介します。具体的に表示をカスタマイズできる項目は下記赤枠および赤文字記載の部分です。</p><p><img src="/blog/azure-active-directory/company-branding-ga/company-branding-ga1.png"></p><p><img src="/blog/azure-active-directory/company-branding-ga/company-branding-ga2.png"></p><h2 id="レイアウトの構成"><a href="#レイアウトの構成" class="headerlink" title="レイアウトの構成"></a>レイアウトの構成</h2><p>サインイン ページにおける各要素の配置を指定することができます。</p><p><img src="/blog/azure-active-directory/company-branding-ga/company-branding-ga3.png"></p><p>たとえば、上記にて「テンプレート」の項目を「一部画面の背景」とすると、通常画面真ん中に表示されるユーザー名入力画面が右側に表示されるようになります。AD FS ではこの右寄りのデザインが既定であるため、AD FS のサインイン画面と一貫性を持たせたい場合は「一部画面の背景」をご利用いただくのも手です。</p><p><strong>全画面の背景</strong></p><p><img src="/blog/azure-active-directory/company-branding-ga/company-branding-ga4.png"></p><p><strong>一部画面の背景</strong></p><p><img src="/blog/azure-active-directory/company-branding-ga/company-branding-ga5.png"></p><p>CSS を利用できるお客様は、下記を利用してカスタム CSS をアップロードすることも可能です。弊社サポートでは、 CSS を代理で作成するようなご支援などは恐縮ながら承っていないため、<a href="https://learn.microsoft.com/ja-jp/azure/active-directory/fundamentals/reference-company-branding-css-template">こちらのリファレンス ガイド</a> を利用しお客様側で CSS を作成ください。</p><h2 id="カスタムのセルフ-サービス-パスワード-リセットのハイパーリンク"><a href="#カスタムのセルフ-サービス-パスワード-リセットのハイパーリンク" class="headerlink" title="カスタムのセルフ サービス パスワード リセットのハイパーリンク"></a>カスタムのセルフ サービス パスワード リセットのハイパーリンク</h2><p>この機能により、サインイン ページでのセルフ サービス パスワード リセットのリンクを表示したり、隠したり、カスタマイズすることが可能です。</p><p><img src="/blog/azure-active-directory/company-branding-ga/company-branding-ga6.png"></p><p>下記設定にて「パスワード収集の表示テキスト」に指定した文字列を表示させたり、 URL をカスタマイズしたりすることができます。</p><p><img src="/blog/azure-active-directory/company-branding-ga/company-branding-ga7.png"></p><h2 id="フッターのハイパーリンクのカスタマイズ"><a href="#フッターのハイパーリンクのカスタマイズ" class="headerlink" title="フッターのハイパーリンクのカスタマイズ"></a>フッターのハイパーリンクのカスタマイズ</h2><p>サインイン ページのフッターに表示されるプライバシーと利用規約の URL および表示文字列をカスタマイズいただけます。</p><p><img src="/blog/azure-active-directory/company-branding-ga/company-branding-ga8.png"></p><h2 id="Favicon-の設定"><a href="#Favicon-の設定" class="headerlink" title="Favicon の設定"></a>Favicon の設定</h2><p>ウェブ ブラウザーのタブに表示されるアイコンを設定いただけます。</p><p><img src="/blog/azure-active-directory/company-branding-ga/company-branding-ga9.png"></p><p>設定がアップロードされると、最終的なユーザー体験をご覧いただくことができます。</p><p><img src="/blog/azure-active-directory/company-branding-ga/company-branding-ga10.png"></p><p>Azue AD Premium もしくは Office 365 を利用して、会社のブランド機能をぜひ利用ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは。 Azure ID チームの小出です。&lt;/p&gt;
&lt;p&gt;本記事は、2023 年 7 月 25 日に公開されました  &lt;a href=&quot;https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-b</summary>
      
    
    
    
    
    <category term="Company Branding" scheme="https://jpazureid.github.io/blog/tags/Company-Branding/"/>
    
  </entry>
  
  <entry>
    <title>エンタイトルメント管理 - 新しく一般公開された機能のご紹介</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/entitlement-management-ga/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/entitlement-management-ga/</id>
    <published>2023-08-16T23:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.519Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。 Azure ID チームの小出です。</p><p>本記事は、2023 年 7 月 18 日に公開されました  <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/microsoft-entra-id-governance-entitlement-management-new/ba-p/2466929">Microsoft Entra ID Governance Entitlement Management New Generally Available Capabilities</a>  の記事をもとに、分かりやすく日本語におまとめしなおした記事となります。ご不明点などございましたらお気軽にサポートまでお問い合わせください。</p><p>今回の記事では、エンタイトルメント管理にて、新しく一般公開 (GA) された機能について、それぞれ詳細をご紹介いたします。</p><h2 id="1-カスタム拡張属性を利用したアクセス-パッケージ"><a href="#1-カスタム拡張属性を利用したアクセス-パッケージ" class="headerlink" title="1. カスタム拡張属性を利用したアクセス パッケージ"></a>1. カスタム拡張属性を利用したアクセス パッケージ</h2><p>アクセス パッケージを作成するときに、任意項目なのでスキップしてしまいがちですが、下記のように「カスタム拡張機能」を指定できる機能があります。こちらが一般公開されました。</p><p><img src="/blog/azure-active-directory/entitlement-management-ga/entitlement-management-ga1.png"></p><p>この機能を使うと、アクセス パッケージが割り当てられたときや期限が切れそうなときに、事前に指定したカスタム拡張機能を実行することができます。たとえば上記のスクリーンショットでは、アクセス パッケージの割り当てが行われたことをメール通知するような機能をカスタム拡張機能として指定しています。その他にもカスタム拡張機能の実行のタイミングとして以下を選択可能です。</p><p><img src="/blog/azure-active-directory/entitlement-management-ga/entitlement-management-ga2.png"></p><p>カスタム拡張機能はカタログ内に項目として存在しており、下記から新しい拡張機能を作成することができます。また、以下の例では packageTask1 というロジック アプリに拡張機能を紐づけ、カスタム拡張機能が呼び出されると、このロジック アプリが実行される仕組みになっています。</p><p><img src="/blog/azure-active-directory/entitlement-management-ga/entitlement-management-ga3.png"></p><p>プログラミング スキルがなくても、下記のようなデザイナーを使って、どのような処理を行いたいかを GUI 上で構成することが可能です。</p><p><img src="/blog/azure-active-directory/entitlement-management-ga/entitlement-management-ga4.png"></p><p>なお、恐縮ながらスクリプトの支援と同様、ロジック アプリの具体的な記載方法などについてはサポートでは支援が難しい場合があります。<a href="https://learn.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-logic-apps-integration">こちらの公開情報</a> を参考いただき、まずはお客様側で実装いただけますと幸いです。</p><p>別途カスタム拡張機能を利用したサンプルなどをまとめしたブログを現在執筆しておりますので、公開次第こちらでもリンクをご紹介します。</p><h2 id="2-アクセス-パッケージの動的割り当てポリシー"><a href="#2-アクセス-パッケージの動的割り当てポリシー" class="headerlink" title="2. アクセス パッケージの動的割り当てポリシー"></a>2. アクセス パッケージの動的割り当てポリシー</h2><p>これまでアクセス パッケージでは、パッケージを割り当てたいユーザーを個別に指定するか、ユーザー側から要求してもらう必要がありましたが、動的割り当てポリシーが用意されたことにより、動的グループや動的管理単位のように、事前に指定したルールをもとにアクセス パッケージをユーザーへ割り当てることができるようになりました。</p><p>作成したアクセス パッケージのポリシー メニューにて、「自動割り当てポリシーの追加」 をクリックすると、下記のように、ルール構文を指定することができます。</p><p><img src="/blog/azure-active-directory/entitlement-management-ga/entitlement-management-ga5.png"></p><p>詳細につきましては、<a href="https://learn.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-access-package-auto-assignment-policy">こちらの公開情報</a> をご確認ください。</p><h2 id="3-エンタイトルメント管理における-Verified-ID"><a href="#3-エンタイトルメント管理における-Verified-ID" class="headerlink" title="3. エンタイトルメント管理における Verified ID"></a>3. エンタイトルメント管理における Verified ID</h2><p>2023 年の春に、Verified ID とエンタイトルメント管理の統合について、パブリック プレビューを開始し、今回機能が一般公開されました。この統合により、Verified ID チェックをアクセス要求管理ワークフローに組み込むことができるようになりました。Verified ID チェックを利用することで、人的ミスを排除して不正アクセスのリスクを低減し、セキュリティを強化することができます。</p><p><img src="/blog/azure-active-directory/entitlement-management-ga/entitlement-management-ga6.png"></p><h2 id="4-条件付きアクセスにおけるエンタイトルメント管理のサポート"><a href="#4-条件付きアクセスにおけるエンタイトルメント管理のサポート" class="headerlink" title="4. 条件付きアクセスにおけるエンタイトルメント管理のサポート"></a>4. 条件付きアクセスにおけるエンタイトルメント管理のサポート</h2><p>条件付きアクセス ポリシーにおいて、エンタイトルメント管理のアプリを指定することができるようになりました。エンタイトルメント管理のアプリケーションは、Azure AD Identity Governance - Entitlement Management となります。たとえば利用シナリオとしては、このエンタイトルメント管理のアプリケーションや My access を条件付きアクセス ポリシーの適用対象外のアプリとして追加することなどが挙げられます。</p><p><img src="/blog/azure-active-directory/entitlement-management-ga/entitlement-management-ga7.png"></p><h2 id="5-My-Access-での検索機能が改善"><a href="#5-My-Access-での検索機能が改善" class="headerlink" title="5. My Access での検索機能が改善"></a>5. My Access での検索機能が改善</h2><p>アクセス パッケージをより効率的に検索できるよう、パッケージの中に含まれるリソースが表示されるようになりました。また、アクセスパッケージ名、説明、リソースなどの追加条件を使用してアクセスパッケージを検索できるようになりました。</p><p><img src="/blog/azure-active-directory/entitlement-management-ga/entitlement-management-ga8.png"></p><p>新しく一般公開されたエンタイトルメント管理の機能をぜひご利用ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは。 Azure ID チームの小出です。&lt;/p&gt;
&lt;p&gt;本記事は、2023 年 7 月 18 日に公開されました  &lt;a href=&quot;https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-b</summary>
      
    
    
    
    
    <category term="Identity Governance" scheme="https://jpazureid.github.io/blog/tags/Identity-Governance/"/>
    
  </entry>
  
  <entry>
    <title>[情報採取] Azure AD Connect に関わる問題などの際に採取、提供いただきたい情報</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory-connect/azure-ad-connect-general-information/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory-connect/azure-ad-connect-general-information/</id>
    <published>2023-08-16T15:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.007Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、日本マイクロソフトの金子です。</p><p>本記事は、 2020 年に初回投稿された記事を、現在の情報採取手順やご案内に見直し更新いたしております。</p><p>Azure AD Connect に関わる問題が発生した場合にテクニカル サポートにお問い合わせいただく際、下記の情報をご提供いただくことで問い合わせがスムーズに行われますので、予め採取をお願いいたします。</p><p>調査過程で追加で採取いただく情報が増える可能性がありますので、予めご了承ください。</p><p>ここでご案内しました情報を事前に取得し、お問い合わせと合わせてご提供いただくことで次のようなメリットがあります。</p><ul><li>お問い合わせに対する回答・問題解決をよりはやくできます。</li><li>後々、再現できなくなり、問題発生時の情報がないために、問題の発生要因を追及できなくなるケースが減らせます。</li><li>サポート エンジニアより情報採取を案内される分のやり取りを減らせます。</li><li>情報があるため、サポート エンジニアがより事象についてより把握した状態でお客様とゴール設定ができます。</li></ul><p>Azure AD Connect トラブルシューティングは大区分として、Azure AD Connect サーバー全般に関わる問題か、特定のオブジェクトに関わる問題かにより調査に必要な情報が異なります。<br>上記内容をスクリプトで一括採取する方法につきましてもご用意させていただいていますので、こちらをもとにシナリオごとに情報を採取してください。</p><p> AADC サーバー情報一括採取ツール</p><p> <a href="https://github.com/jpazureid/aadconnect-diagnostic">https://github.com/jpazureid/aadconnect-diagnostic</a></p><p>なお、シナリオにかかわらず、以下の情報も一括採取ログと併せてお送りいただくと、よりスムーズな対応が可能です。</p><p>a. エラーの画面またはログ抜粋</p><p>　 オブジェクト同期に関わる問題につきましては、Synchronization Service Manager のステータスや詳細が確認できる画面キャプチャなど</p><p>b. テナント名   (例 contoso.onmicrosoft.com)</p><p>c. 発生日時</p><p>d. 現在の状況 (事象が継続中 or 断続的に発生 or 解消済み)</p><p>e. 事象発生前後の状況 (構成変更やアップグレードをした場合には具体的なバージョンなど)</p><h3 id="運用環境にて見慣れないエラーやイベントが発生した場合"><a href="#運用環境にて見慣れないエラーやイベントが発生した場合" class="headerlink" title="運用環境にて見慣れないエラーやイベントが発生した場合"></a>運用環境にて見慣れないエラーやイベントが発生した場合</h3><p>まず、上記の “簡易取得” を実行して取得し、お問い合わせ起票時に下記の情報と合わせて取得済みの旨お知らせください。</p><h3 id="特定のオブジェクトが同期できない・エラーが発生している場合"><a href="#特定のオブジェクトが同期できない・エラーが発生している場合" class="headerlink" title="特定のオブジェクトが同期できない・エラーが発生している場合"></a>特定のオブジェクトが同期できない・エラーが発生している場合</h3><p>上記 “簡易取得” と “オブジェクト情報 (AD/CS/MV) 取得” を実行してください。オブジェクト情報の取得を行うスクリプトを実行する際には、問題が発生しているオブジェクトの情報を指定して実行してください。</p><h3 id="パスワード-ハッシュ同期に失敗している・ユーザーのパスワード-ライトバックができない場合"><a href="#パスワード-ハッシュ同期に失敗している・ユーザーのパスワード-ライトバックができない場合" class="headerlink" title="パスワード ハッシュ同期に失敗している・ユーザーのパスワード ライトバックができない場合"></a>パスワード ハッシュ同期に失敗している・ユーザーのパスワード ライトバックができない場合</h3><p>上記 “簡易取得” と “シナリオトレース (オブジェクト同期、パスワードハッシュ同期、パスワードライトバック)” を実行してください。</p><h3 id="パススルー認証に関する問題の場合"><a href="#パススルー認証に関する問題の場合" class="headerlink" title="パススルー認証に関する問題の場合"></a>パススルー認証に関する問題の場合</h3><p>上記 “簡易取得” と ”シナリオトレース (パススルー認証)” を実行してください。</p><h3 id="Azure-AD-Connect-Health-がうまく稼働しない場合"><a href="#Azure-AD-Connect-Health-がうまく稼働しない場合" class="headerlink" title="Azure AD Connect Health がうまく稼働しない場合"></a>Azure AD Connect Health がうまく稼働しない場合</h3><p>”シナリオトレース (Azure AD Connect Health for Sync)” を実行してください。</p><h3 id="Azure-AD-Connect-インストール-ウィザードが開けない・ウィザードの先の画面に進めない場合"><a href="#Azure-AD-Connect-インストール-ウィザードが開けない・ウィザードの先の画面に進めない場合" class="headerlink" title="Azure AD Connect インストール ウィザードが開けない・ウィザードの先の画面に進めない場合"></a>Azure AD Connect インストール ウィザードが開けない・ウィザードの先の画面に進めない場合</h3><p>”シナリオトレース (構成ウィザード、またはその他のシナリオ)” を実行してください。</p><h3 id="接続面に問題があるようなエラーが発生している場合"><a href="#接続面に問題があるようなエラーが発生している場合" class="headerlink" title="接続面に問題があるようなエラーが発生している場合"></a>接続面に問題があるようなエラーが発生している場合</h3><p>Azure AD Connect の構成ウィザードでは、Active Directory や Azure AD への接続に問題が起きている場合にエラーが発生します。<br>接続の問題が疑われる場合は、 Azure AD Connect 構成ウィザード上のトラブルシューティングを実行し通信面の問題を確認することが可能です。</p><p>Azure AD Connect Sync を使用したオブジェクト同期のトラブルシューティング</p><p><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/hybrid/connect/tshoot-connect-objectsync">https://learn.microsoft.com/ja-jp/azure/active-directory/hybrid/connect/tshoot-connect-objectsync</a></p><ol><li>Azure AD Connectインストール サーバー上で PowerShell を管理者として起動します。</li><li>Set-ExecutionPolicy RemoteSigned または Set-ExecutionPolicy Unrestricted を実行します。</li><li>続いてスタート メニューより [Azure AD Connect] を選択し、 Azure AD Connect 構成ウィザードを起動します。</li><li>[追加のタスク] – [トラブルシューティング] に移動し、 [次へ] を選択します。</li><li>PowerShell ウィンドウが起動するので、 Azure AD の通信状況を確認したい場合には「5」、オンプレミス AD の通信状況を確認したい場合には「6」を入力して Enter を押します。</li></ol><p> <img src="/blog/azure-active-directory-connect/azure-ad-connect-general-information/azure-ad-connect-general-information1.png"></p><ol start="6"><li>結果が表示されます。通信に問題がある場合にはエラーが表示されるので内容を基にトラブルシューティングを実施ください。</li></ol><p>また、弊社までお問い合わせ頂く際に合わせてエラー内容をお知らせ頂けますと調査をスムーズに行うことができる可能性がありますので、お問い合わせ時に共有いただけますと幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、日本マイクロソフトの金子です。&lt;/p&gt;
&lt;p&gt;本記事は、 2020 年に初回投稿された記事を、現在の情報採取手順やご案内に見直し更新いたしております。&lt;/p&gt;
&lt;p&gt;Azure AD Connect に関わる問題が発生した場合にテクニカル サポートにお問い合わせ</summary>
      
    
    
    
    
    <category term="情報採取" scheme="https://jpazureid.github.io/blog/tags/%E6%83%85%E5%A0%B1%E6%8E%A1%E5%8F%96/"/>
    
    <category term="Azure AD Connect" scheme="https://jpazureid.github.io/blog/tags/Azure-AD-Connect/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra ID Governance の新しいダッシュボードが近々公開されます</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/new-microsoft-entra-id-governance-dashboard-experience-rolling/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/new-microsoft-entra-id-governance-dashboard-experience-rolling/</id>
    <published>2023-07-30T02:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.811Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2023 年 7 月 19 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/new-microsoft-entra-id-governance-dashboard-experience-rolling/ba-p/2466928">New Microsoft Entra ID Governance Dashboard Experience Rolling Out Soon</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>2023 年 6 月 7 日に発表しましたとおり、Microsoft Entra ID Governance は現在 <strong>一般利用可能</strong> となり、より効率的にアクセス管理行いたいとお考えの企業様に新しい機能を提供しています。もしあなたが組織の IT 計画を立案および実行するような立場の場合、適切な人々が適切なリソースを適切な時間だけアクセスできるようにするというのは、ビジネス上の目標でもあり、ご自身の重要な職務でもあろうと思います。また、ID のガバナンス – 誰がいつ何にアクセスし、その理由は何なのかを把握すること – はゼロ トラストにおいてその基礎となるものです。ID のガバナンスと管理 (IGA) を推進するビジネス上の目標が何であれ、ビジネスの利害関係者に分かりやすい形で IGA の状況を示すことが重要性となっています。お客様からもこの声を頂戴しており、弊社としてその声に是非お応えしたいと思っています。</p><p>そこで、新たな Microsoft Entra ID Governance のダッシュボードを作成しました。このダッシュボードは、情報をまとめて現在の ID ガバナンスの状態を一目で把握できるよう表示するとともに、IGA の様々な機能を起動して、コンプライアンスのレポートへ素早くアクセス出来るような機能を提供します。ID のガバナンスを実現するには長い道のりを要するため、お客様によりその進み具合は様々と思われます。</p><ul><li>まだ ID ガバナンスの取り組みを始めたばかりの場合は、まずダッシュボードを使用して IT 環境がどのような状況となっているかをご確認ください。テナント内のユーザーとゲストの数を特定し、業務アプリと特権ロールを把握ください。また、Entra ID Governance がどのような機能を提供しているかご覧いただき、必要なセキュリティとコンプライアンスに対応する実施計画を作成頂ければと思います。</li><li>すでにガバナンス機能を展開し利用している場合は、ダッシュボードを使用して現在のガバナンスへの取り組みが全体のどの程度をカバーできているか把握し、実体と取り組みのギャップを確認ください。例えば、<a href="https://go.microsoft.com/fwlink/?linkid=2210375">エンタイトルメント管理</a> を使用してユーザーへのアクセス権の付与を自動化しているかもしれませんが、定期的な <a href="https://go.microsoft.com/fwlink/?linkid=2211313">アクセス レビュー</a> を設定していないということもあると思います。ダッシュボードのリンクを使用して、ID ガバナンスの状態をさらに改善ください。</li></ul><p>今後、ID Governance ダッシュボードをさらに進化させて、セキュリティとコンプライアンスのニーズにより対応したユーザー体験を提供するとともに、セットアップや構成の必要性をなくして、さらに利用しやすくしていく予定です。</p><h2 id="Microsoft-Entra-ID-Governance-ダッシュボードの使用方法"><a href="#Microsoft-Entra-ID-Governance-ダッシュボードの使用方法" class="headerlink" title="Microsoft Entra ID Governance ダッシュボードの使用方法"></a>Microsoft Entra ID Governance ダッシュボードの使用方法</h2><p><img src="/blog/azure-active-directory/new-microsoft-entra-id-governance-dashboard-experience-rolling/img.png"></p><p>ダッシュボードにアクセスするには、Microsoft Entra 管理センターにサインインし、”Identity Governance” の下の “Dashboard” ブレードを選択ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>お使いのテナントではまだ機能が有効になっておらず、ブレードが存在しない場合がございます。</p></div><p>ダッシュボードは次のようなコンポーネントで構成されています。</p><ul><li><strong>一覧性に優れたカード</strong>: これらのカードは、従業員、ゲスト、特権 ID、およびアプリケーションのアクセスのガバナンスの観点から、テナントで何が起きているかについての概要レベルの情報を提供します。カードのナビゲーション リンクをクリックすると、ID Governance のクイック スタート ガイドとチュートリアルにジャンプします。</li><li><strong>ID Governance のステータス</strong>: この画面は、従業員、ゲスト、業務アプリ、グループ、特権ロールの数という観点から ID の全体像を表示します。そして、これら従業員などの要素をよりよく管理するための各 Microsoft Entra ID Governance の機能を提示します。まだ機能を利用しておらず構成されていない場合は、ボタンを押してその機能の設定ブレードを開く事も可能です。</li><li><strong>チュートリアル</strong>: このセクションには、よく利用される ID Governance の使用例のチュートリアルが表示されます。</li><li><strong>ハイライト</strong>: このセクションでは、最新の ID Governance 機能について情報を得たり、他のお客様が ID Governance をどのように使用してセキュリティとコンプライアンスの状態を改善しているかを学んだすることが可能です。</li></ul><p>この新しいダッシュボードについて詳しく知るためには、<a href="https://learn.microsoft.com/ja-jp/azure/active-directory/governance/governance-dashboard">Microsoft Entra ID Governance ダッシュボード</a> の記事をご覧ください。</p><h2 id="是非お試しください"><a href="#是非お試しください" class="headerlink" title="是非お試しください"></a>是非お試しください</h2><p>これらの新機能をぜひ皆さんに試していただきたいと思っています！現在 Microsoft Entra ID Premium ライセンスをお持ちのお客様は、以下の 2 つのいずれかの方法で新しい機能をご利用いただけます:</p><ol><li><a href="https://aka.ms/EntraIDGovTrial">https://aka.ms/EntraIDGovTrial</a> から Microsoft Entra ID Governance のトライアルを開始する。</li><li>オンラインもしくはライセンス パートナーを通じてか、Microsoft の営業チームと連携している場合は直接 Microsoft から Microsoft Entra ID Governance にアップグレードする。</li></ol><p>Joseph Dadzie<br>Partner Director of Product Management<br>LinkedIn: <a href="https://www.linkedin.com/in/joedadzie/">@joedadzie</a><br>Twitter: <a href="https://twitter.com/joe_dadzie">@joe_dadzie</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2023 年 7 月 19 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra ワークロード ID の新しい App Health 推奨機能</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/new-app-health-recommendations-in-microsoft-entra-workload-identities/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/new-app-health-recommendations-in-microsoft-entra-workload-identities/</id>
    <published>2023-07-30T01:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.799Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 名取 です。</p><p>本記事は、2023 年 6 月 29 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/new-app-health-recommendations-in-microsoft-entra-workload/ba-p/2959984">New App Health Recommendations in Microsoft Entra Workload Identities</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>先日、弊社では <a href="https://query.prod.cms.rt.microsoft.com/cms/api/am/binary/RW10qzO">2023 年クラウドにおけるアクセス許可のリスク状態</a> のレポートを発表し、クラウド環境の拡大だけでなく、重要なクラウド リソースにアクセスする ID の種類の増加に関して非常に興味深い調査結果を公表しました。このレポートでは、ワークロード ID のセキュリティ保護がこれまで以上に重要になっている理由について興味深い調査結果が明らかにされています:</p><ul><li>ワークロード ID は、人間の ID を 10:1 で上回り、2021 年の 2 倍になりました。この大幅な増加により、新たなセキュリティ リスクが生じています。</li><li>ワークロード ID の 80% 以上が非アクティブであり、2021 年に報告された割合の 2 倍となっています。</li><li>ワークロード ID は付与されたアクセス許可の 5% 未満しか使用していません。</li><li>ワークロード ID の約 70% が機密データにアクセスできます。</li></ul><p>膨大な数の非アクティブなワークロード ID と資格情報が存在するということは、特にその多くが高いアクセス許可を持っており、クラウド全体で動作していることを考えると、大幅なリスク軽減の機会となります。非アクティブな ID や古い認証情報は侵害のターゲットになりやすく、通常は削除しても影響はありませんが、資格情報の有効期限が切れると障害がにつながる可能性もあります。</p><p>Kuppinger Cole のホワイトペーパー<a href="https://www.kuppingercole.com/reprints/cb05bfdbbdb25b6535a42835b77465e2#heading1">Securing Non-Human Identities</a> によると、直近での大きな変化は、ワークロード ID を含む人間以外の ID の数と種類が急速に増加していることです。ビジネス リスク、セキュリティ リスク、コンプライアンス リスクにさらされないように、適切に ID を管理することはますます難しくなっています。</p><p>人間以外の ID に関する新たな問題を解決するために、<a href="https://jpazureid.github.io/blog/azure-active-directory/managing-governing-and-securing-identities-for-apps-and-services/">2022 年 11 月に Microsoft Entra Workload Identities</a> を発表しました。これにより、企業はワークロード ID に対して条件付きアクセス、ID Protection、資格情報ポリシー、およびアクセス レビューを構成できるようになります。つまり、ユーザーとは異なる動作をしている可能性のあるワークロードのリスクを検出して修正することが可能になります。</p><p>どの ID に危険な構成があるのか​​、または完全に削除する必要があるのかどうか​​を容易に確認することが非常に重要になっています。そのため、Microsoft Entra ワークロード ID 内の新機能であるアプリの正常性に関する推奨事項をこの度発表いたします。</p><h2 id="App-Health-推奨事項によるアプリの正常性強化"><a href="#App-Health-推奨事項によるアプリの正常性強化" class="headerlink" title="App Health 推奨事項によるアプリの正常性強化"></a>App Health 推奨事項によるアプリの正常性強化</h2><p>ワークロード ID の 80% 以上が非アクティブであるため、これらのアプリやサービスを可視化することは非常に重要です。Microsoft Entra ワークロード ID のアプリの正常性に関する推奨機能は、システム環境を保護し、推奨されるベスト プラクティスに従って障害を回避するのに役立つ知見と実用的なガイダンスを提供します。例えば、30 日以上使用されていないアプリケーションへの対処、未使用のアプリケーションの資格情報の削除、期限切れが近い資格情報の更新などです。</p><p>未使用のアプリケーションおよび未使用のアプリケーション認証情報を削除することで、ワークロード ID 全体のセキュリティ体制が向上し、良好な ID の状態が実現されます。これにより、攻撃者が未使用のアプリケーションを発見して悪用するなどの侵害のリスクが軽減されます。未使用の ID に付与されたアクセス許可によっては、組織の機密データの漏洩につながったり、攻撃者がより攻撃の幅を広げてしまう可能性があります。</p><h2 id="推奨事項とその対処方法"><a href="#推奨事項とその対処方法" class="headerlink" title="推奨事項とその対処方法"></a>推奨事項とその対処方法</h2><p>これらの新機能は、<a href="https://learn.microsoft.com/azure/active-directory/reports-monitoring/overview-recommendations">Azure AD の推奨事項</a> で利用可能です。各推奨事項には、問題の説明、アクションを実行する利点、段階的な改善手順を含むアクション プランが含まれています。Microsoft Entra ワークロード ID の一部として最初に提供される、3 つのアプリの正常性に関する推奨事項は次のとおりです:</p><ol><li>未使用のアプリケーション</li><li>未使用のアプリケーション資格情報</li><li>期限切れのアプリケーション資格情報</li></ol><p>推奨事項の <strong>状態</strong> は、手動かシステムによって自動で更新されます。すべてのリソースがアクション プランに従って対処されると、その次に推奨事項のサービスが実行されるときに、推奨事項のステータスが自動的に「完了」に変わります。</p><p><img src="/blog/azure-active-directory/new-app-health-recommendations-in-microsoft-entra-workload-identities/new-app-health-recommendations-in-microsoft-entra-workload-identities.png"></p><p>上記画面を確認し、最善の対応を行うには、以下の手順を実施ください:</p><p>　1. Microsoft Entra 管理センター &gt; Azure AD &gt; [概要] に移動し、[推奨設定] を選択します。<br>　2. リストから推奨事項を選択すると、詳細、状態、アクション プランが表示されます。<br>　3. アクション プランに従い操作を行います。<br>　4. 該当する場合は、推奨事項内のリソースのステータスをクリックし、[次としてマーク] を選択してステータスを選択します。</p><p> Microsoft Graph を使用してアプリの正常性に関する推奨事項を操作したい場合は、<a href="https://learn.microsoft.com/en-us/azure/active-directory/reports-monitoring/howto-use-recommendations?toc=/azure/active-directory/workload-identities/toc.json&bc=/azure/active-directory/workload-identities/breadcrumb/toc.json">こちらのドキュメント</a> を参照ください。</p><h2 id="アプリの正常性に関する推奨事項を今すぐ試してベスト-プラクティスを実施ください"><a href="#アプリの正常性に関する推奨事項を今すぐ試してベスト-プラクティスを実施ください" class="headerlink" title="アプリの正常性に関する推奨事項を今すぐ試してベスト プラクティスを実施ください"></a>アプリの正常性に関する推奨事項を今すぐ試してベスト プラクティスを実施ください</h2><p>クラウド基盤にアクセスするワークロード ID が増加し続ける中、企業が攻撃や停止のリスクを軽減するために、セキュリティ体制を見直すことが重要です。</p><p><strong>参考情報:</strong></p><ul><li>人間以外の ID、アクセス許可のリスクについて詳しく知り、Microsoft Entra ワークロード ID と Permissions Management の概要を把握するには、この <a href="https://www.kuppingercole.com/reprints/cb05bfdbbdb25b6535a42835b77465e2#heading1">Kuppinger Cole whitepaper</a> と <a href="https://query.prod.cms.rt.microsoft.com/cms/api/am/binary/RW10qzO">2023 年のクラウド アクセス許可リスクの状況レポート</a> を参照ください。</li><li>Microsoft Entra のワークロード ID のベスト プラクティスの詳細については、以下を参照ください:<ul><li><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/identity-protection/concept-workload-identity-risk">ワークロード ID をセキュリティで保護する</a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/develop/zero-trust-for-developers">ゼロ トラストの原則を使用してアプリケーションのセキュリティを強化する</a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/develop/security-best-practices-for-app-registration">Azure Active Directory でのアプリケーション プロパティのセキュリティに関するベスト プラクティス</a></li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 名取 です。&lt;/p&gt;
&lt;p&gt;本記事は、2023 年 6 月 29 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra ID における制限付き管理の管理単位の紹介</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/introducing-restricted-management-au-in-microsoft-entra-id/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/introducing-restricted-management-au-in-microsoft-entra-id/</id>
    <published>2023-07-30T00:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.699Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 北村 です。</p><p>本記事は、2023 年 7 月 12 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/introducing-restricted-management-administrative-units-in/ba-p/3867839">Introducing Restricted Management Administrative Units in Microsoft Entra ID</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>Microsoft Entra ID の新しいロールベースのアクセス制御 (RBAC) 機能である、<a href="https://learn.microsoft.com/ja-jp/azure/active-directory/roles/admin-units-restricted-management">制限付き管理の管理単位</a> のパブリック プレビューを共有できることを嬉しく思います。</p><h2 id="制限付き管理の管理単位でできること"><a href="#制限付き管理の管理単位でできること" class="headerlink" title="制限付き管理の管理単位でできること"></a>制限付き管理の管理単位でできること</h2><p>制限付き管理の管理単位を使用すると、Microsoft Entra ID テナント内の特定のユーザー、セキュリティ グループ、またはデバイスを指定して、それらをテナント レベルの管理者から変更ができないようにすることが可能となります。</p><p>これは以下のような場合に有用です： </p><ul><li>役員など、機密性の高いユーザー アカウントを、通常のヘルプデスク管理者によるパスワードや多要素認証設定の変更から保護したい。</li><li>特定の国の特定のユーザー アカウント、セキュリティ グループ、またはデバイスを、その国の指定された管理者のみが変更できるようにしたい。</li><li>機密データへのアクセスを許可する特定のセキュリティ グループがあり、そのメンバーシップを変更できる人を一部の管理者に限定したい。</li></ul><p>機密オブジェクトを制限付き管理の管理単位に配置することで、テナント レベルの管理者はそれらのオブジェクトを変更できなくなります。 管理単位自体のスコープに明示的に割り当てた管理者だけが変更を加えることができます。</p><p><img src="/blog/azure-active-directory/introducing-restricted-management-au-in-microsoft-entra-id/restricted-management-administrative-units1.png" alt="テナント スコープの管理者およびその他の管理単位スコープの管理者は、役員のアカウント パスワードをリセットできません。 これらのアカウントを管理できるのは、明示的に指定された管理単位の管理者のみです。"> </p><p>機密性の高いオブジェクトと、その他の機密性の低いオブジェクトを同列に扱うよりも、このように管理単位でまとめる方が遥かに簡単です。</p><h2 id="お使いのテナントで制限付き管理の管理単位を使用する方法"><a href="#お使いのテナントで制限付き管理の管理単位を使用する方法" class="headerlink" title="お使いのテナントで制限付き管理の管理単位を使用する方法"></a>お使いのテナントで制限付き管理の管理単位を使用する方法</h2><p>ここでは、制限付き管理の管理単位を使用して、テナント内の機密性の高いユーザー アカウントを簡単に保護する例を示します： </p><ol><li><strong>[役割と管理者]</strong> で <strong>[管理単位]</strong> を選択し、 <strong>[追加]</strong> をクリックして新しい管理単位を作成します。</li></ol><p><img src="/blog/azure-active-directory/introducing-restricted-management-au-in-microsoft-entra-id/restricted-management-administrative-units2.png">  </p><ol start="2"><li><strong>[制限付き管理の管理単位]</strong> を [はい] に設定し、[次へ: ロールの割り当て] をクリックします。</li></ol><p><img src="/blog/azure-active-directory/introducing-restricted-management-au-in-microsoft-entra-id/restricted-management-administrative-units3.png">  </p><ol start="3"><li>機密性の高いアカウントのヘルプデスク管理者となるべき管理者（アカウントを管理したい人）を追加し、管理単位の作成を完了します。</li></ol><p><img src="/blog/azure-active-directory/introducing-restricted-management-au-in-microsoft-entra-id/restricted-management-administrative-units4.png"> </p><ol start="4"><li>この段階で、(他の管理単位の場合と同様に) 作成した制限付き管理の管理単位に、機密性の高いユーザー アカウントを追加することができます。</li></ol><p><img src="/blog/azure-active-directory/introducing-restricted-management-au-in-microsoft-entra-id/restricted-management-administrative-units5.png"> </p><p>これで完了です！ これで、テナント内で他の管理ロールがどれだけ割り当てられていても、機密性の高いユーザー アカウントは指定したユーザーのみが変更できるようになります。</p><p>制限付き管理の管理ユニットがテナント内の機密リソースの保護にどのように役立つかの詳細については、<a href="https://learn.microsoft.com/ja-jp/azure/active-directory/roles/admin-units-restricted-management">製品ドキュメント</a> をご覧ください！</p><p>よろしくお願いします。</p><p>Stuart Kwan<br>Partner Manager, Product Management<br>Microsoft Identity Division</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 北村 です。&lt;/p&gt;
&lt;p&gt;本記事は、2023 年 7 月 12 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommuni</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD Connect インストール前の確認事項</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory-connect/checklist-before-installing-aad-connect/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory-connect/checklist-before-installing-aad-connect/</id>
    <published>2023-07-25T15:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.023Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、 Azure &amp; Identity サポート チームです。<br>Azure AD Connect の新規構築、サーバー移行時に多くお問い合わせいただく事前に確認点をお纏めいたしました。<br>大きく分けて要件としては下記となります。</p><ul><li>A. Azure AD Connect の要件</li><li>B. Azure AD Connect Health Agent の要件</li><li>C. 認証方法による要件</li><li>D. パスワードライトバック機能</li></ul><p>それぞれの要件につきまして、良くあるご質問、技術情報を含め纏めさせていただきました。</p><h2 id="A-Azure-AD-Connect-の要件"><a href="#A-Azure-AD-Connect-の要件" class="headerlink" title="A. Azure AD Connect の要件"></a>A. Azure AD Connect の要件</h2><p>Azure AD Connect 自体の要件としては下記技術情報のとおりとなります。</p><ul><li>Azure AD Connect の前提条件<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/hybrid/how-to-connect-install-prerequisites">https://docs.microsoft.com/ja-jp/azure/active-directory/hybrid/how-to-connect-install-prerequisites</a></li></ul><h3 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="[Q&amp;A]"></a>[Q&amp;A]</h3><hr><ul><li>Q. Azure AD Connect をドメイン コントローラー上にインストールして問題ないか ?</li><li>A. 技術的には共存させることは可能ですが、運用面やトラブル シューティング観点では、別のサーバーに構築する方が安心です。Azure AD Connect もドメイン コントローラーと同等のセキュリティで保護することを推奨していますが、ドメイン コントローラーには特に厳しい制限を課していることが一般的となりますため、通信やセキュリティの要件などを考慮し、お客様側で判断してください。</li></ul><hr><ul><li>Q. Azure AD Connect を他のサービスが稼働している既存のサーバーに構成しても問題か？</li><li>A. 各要件を満たしている場合には特に技術的な制約はありませんが、弊社としてはドメイン コントローラーと同様、機能ごとにサーバーを分けることを推奨しています。<br>運用面にてメンテナンスやセキュリティ面での可用性を確保できるように構成してください。</li></ul><hr><ul><li>Q. Azure AD Connect をスタンドアローン (ワークグループ) で構成可能か。</li><li>A. 構成自体はカスタム インストールにて行うことが可能ですが、ドメイン メンバー サーバーに構成する必要があります。</li></ul><hr><h2 id="B-Azure-AD-Connect-Health-Agent-for-Sync-の要件"><a href="#B-Azure-AD-Connect-Health-Agent-for-Sync-の要件" class="headerlink" title="B. Azure AD Connect Health Agent for Sync の要件"></a>B. Azure AD Connect Health Agent for Sync の要件</h2><p>Azure AD Connect に同梱されている Azure AD Connect Health Agent for Sync を構成する場合、プロキシ構成や要件は Azure AD Connect とは別に用意されています。<br>弊社に Azure AD Connect インストール時にこの要件 (主にネットワーク関連の設定箇所) を満たしていないことでインストール ウィザードで警告が表示されるなどのお問い合わせを多くいただいております。<br>各エンドポイント、プロキシの設定をインストール前に確認をお願いします。</p><ul><li>Azure AD Connect Health エージェントのインストール<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/hybrid/how-to-connect-health-agent-install">https://docs.microsoft.com/ja-jp/azure/active-directory/hybrid/how-to-connect-health-agent-install</a></li></ul><h3 id="Q-amp-A-1"><a href="#Q-amp-A-1" class="headerlink" title="[Q&amp;A]"></a>[Q&amp;A]</h3><hr><ul><li>Q. Azure AD Connect Health Agent をインストールし、同期対象となるテナントにて Azure AD Premium ライセンスがないが問題ないか ?<br>A. インストール自体の処理やライセンス規約などに問題は起きません。<br> ただし、 Azure ポータルからの監視機能が使用できないなどの制約が生じます。</li></ul><hr><p> </p><ul><li>Q. Azure AD Connect Health Agent for Sync を誤ってアンインストールしてしまった場合の対象方法を教えてください。</li><li>A. Azure AD Connect のインストール ウィザードを再試行することで再インストールされます。</li></ul><hr><ul><li>Q. Azure AD Connect Health Agent for Sync 単体でアップグレード可能か ?</li><li>A. いいえ、Azure AD Connect に同梱となり単体でのアップグレードは行えません。 </li></ul><hr><h2 id="C-認証方法による要件"><a href="#C-認証方法による要件" class="headerlink" title="C. 認証方法による要件"></a>C. 認証方法による要件</h2><p>Azure AD Connect で構成する認証方式 (パスワード ハッシュ同期 (PHS) かパススルー認証) により要件は異なります。</p><h3 id="C-1-パスワード-ハッシュ同期-PHS"><a href="#C-1-パスワード-ハッシュ同期-PHS" class="headerlink" title="C-1. パスワード ハッシュ同期 (PHS)"></a>C-1. パスワード ハッシュ同期 (PHS)</h3><p>パスワード ハッシュ同期では Azure AD Connect のインストール要件を満たしていれば、追加でポートの開放や設定は不要となります。</p><ul><li>Azure AD Connect 同期を使用したパスワード ハッシュ同期の実装<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/hybrid/how-to-connect-password-hash-synchronization">https://docs.microsoft.com/ja-jp/azure/active-directory/hybrid/how-to-connect-password-hash-synchronization</a></li></ul><p> </p><h3 id="C-2-パススルー認証"><a href="#C-2-パススルー認証" class="headerlink" title="C-2. パススルー認証"></a>C-2. パススルー認証</h3><p>パススルー認証エージェント (PTA) は Azure AD Connect をインストールするサーバーが 1 台目となり、他のサーバーに PTA を別途インストールすることにより複数台で構成することを推奨しています。<br>PTA をインストールするサーバーでは上述の A. B. とは別にネットワーク要件を満たす必要があります。<br> <br>ファイアウォールでの構成にて各エージェントの要件は下記となります。</p><ul><li>Azure Active Directory パススルー認証: クイック スタート - 手順 1: 前提条件を確認する<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/hybrid/how-to-connect-pta-quick-start#step-1-check-the-prerequisites">https://docs.microsoft.com/ja-jp/azure/active-directory/hybrid/how-to-connect-pta-quick-start#step-1-check-the-prerequisites</a></li></ul><p>プロキシを経由し Azure AD と接続する場合には、WPAD が構成されていない環境の場合には下記技術情報に記載のとおり構成ファイルを編集する必要があります。</p><ul><li>パススルー認証エージェントは、送信 Web プロキシ サーバーで通信できますか。<br><a href="https://learn.microsoft.com/ja-jp/azure/active-directory/hybrid/connect/how-to-connect-pta-faq#------------------web-------------------">https://learn.microsoft.com/ja-jp/azure/active-directory/hybrid/connect/how-to-connect-pta-faq#------------------web-------------------</a></li></ul><h3 id="Q-amp-A-2"><a href="#Q-amp-A-2" class="headerlink" title="[Q&amp;A]"></a>[Q&amp;A]</h3><hr><ul><li>Q. パスワード ハッシュ同期を複数の Azure AD Connect サーバーで構成することが可能か。</li><li>A. いいえ、できません。パスワード ハッシュ同期はアクティブの Azure AD Connect サーバーでのみ行われます。その他の Azure AD Connect サーバーはステージング サーバーとなり、パスワード ハッシュ同期が有効化されている場合も、動作は停止しています。</li></ul><hr><ul><li>Q. PTA の必要数は ?</li><li>A. 1 台で動作はしますが、下記技術情報のとおり、運用環境では 3 つ以上実行することを推奨しております。Azure AD Connect 1 台 (PTA 1 台目) + PTA 2 台目 + PTA 3 台目<br>  <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/hybrid/how-to-connect-pta-quick-start#step-1-check-the-prerequisites">https://docs.microsoft.com/ja-jp/azure/active-directory/hybrid/how-to-connect-pta-quick-start#step-1-check-the-prerequisites</a></li></ul><h2 id="D-パスワードライトバック機能"><a href="#D-パスワードライトバック機能" class="headerlink" title="D. パスワードライトバック機能"></a>D. パスワードライトバック機能</h2><p>パスワードの書き戻しを有効とした場合には、Azure AD から Active Directory へのパスワードの書き戻し処理のために下記の要件を満たす必要があります。 </p><ul><li>オンプレミス Active Directory への書き込み権限<br>Azure AD Connect に対するアカウントのアクセス許可を構成する<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/tutorial-enable-sspr-writeback#configure-account-permissions-for-azure-ad-connect">https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/tutorial-enable-sspr-writeback#configure-account-permissions-for-azure-ad-connect</a></li></ul><blockquote><p>[補足]<br>セルフパスワード リセット サービス (SSPR) を構成する場合には、下記 URL およびデータセンター IP  アドレスへの送信 HTTPS アクセスが許可される必要があります。<br>  *.passwordreset.microsoftonline.com<br>  *.servicebus.windows.net<br> <br>  Microsoft Azure Datacenter IP Ranges<br>  <a href="https://www.microsoft.com/en-us/download/details.aspx?id=41653">https://www.microsoft.com/en-us/download/details.aspx?id=41653</a> </p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、 Azure &amp;amp; Identity サポート チームです。&lt;br&gt;Azure AD Connect の新規構築、サーバー移行時に多くお問い合わせいただく事前に確認点をお纏めいたしました。&lt;br&gt;大きく分けて要件としては下記となります。&lt;/p&gt;
&lt;ul&gt;
</summary>
      
    
    
    
    
    <category term="Azure AD Connect" scheme="https://jpazureid.github.io/blog/tags/Azure-AD-Connect/"/>
    
  </entry>
  
  <entry>
    <title>Health service data is not up to date. の通知メールについて</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory-connect/azure-ad-connect-health-notification/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory-connect/azure-ad-connect-health-notification/</id>
    <published>2023-07-24T15:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.007Z</updated>
    
    <content type="html"><![CDATA[<div class="alert is-info"><p class="alert-title">Note</p><p>本記事は Technet Blog の更新停止に伴い <a href="https://blogs.technet.microsoft.com/jpazureid/2018/03/01/aadc-health-notification/">https://blogs.technet.microsoft.com/jpazureid/2018/03/01/aadc-health-notification/</a> の内容を移行したものです。</p><p>元の記事の最新の更新情報については、本内容をご参照ください。</p><p>2018 年 3 月 1 日に「Azure AD Connect Health Notification メールについて」 として公開しておりましたが、情報が古くなってまいりましたので、 2023 年 7 月 25 日時点の最新情報として改めて更新のうえ公開しております。</p></div><p>こんにちは！ Azure Identity サポートの小出です。  </p><p>Azure AD Connect を利用してオンプレミスと Azure AD を連携している環境で最近 (2018 年 2 月) 突然次のような通知メールが届いているケースがあると思います。<br>この通知メールについて Q&amp;A 形式で纏めました。  </p><p>&lt;本文サンプル&gt;<br><img src="/blog/azure-active-directory-connect/azure-ad-connect-health-notification/notification1.png"></p><p><img src="/blog/azure-active-directory-connect/azure-ad-connect-health-notification/notification2.png"></p><h2 id="Q-このメールは何を通知しているのか？"><a href="#Q-このメールは何を通知しているのか？" class="headerlink" title="Q. このメールは何を通知しているのか？"></a>Q. このメールは何を通知しているのか？</h2><p>A. Azure AD Connect Health Agent による Azure データセンターへの正常性データのアップロードが RAISED (発生日時) から RESOLVE (解決日時) まで行われていなかったことを通知しています。<br>Azure AD Connect はオンプレミスの Active Directory のユーザー情報を Azure AD に同期しますが、その他にもオンプレミスのサーバーの監視をおこなう Azure AD Connect Health Agent というエージェントがあります。<br>このエージェントは定期的にオンプレミスの監視対象とするサーバーの情報を Azure AD にアップロードします。<br>今回の通知は、そのアップロードが一定期間  RAISED (発生日時) から RESOLVE (解決日時) まで、行えていなかったことを管理者に通知しています。<br>Azure AD Connect Health Agent サービスによるアップロードが 2 時間以上行われていないと Azure Portal 上にそのことを示す通知が行われます。<br>Azure Portal : URL:<a href="https://aka.ms/aadconnecthealth">https://aka.ms/aadconnecthealth</a>  </p><p>メールは上記サンプルのように、基本的には発生した時と解消した時の2回通知されます。</p><h2 id="Q-Resolved-だが、監視通信は正常な状態になっているのか？"><a href="#Q-Resolved-だが、監視通信は正常な状態になっているのか？" class="headerlink" title="Q. [Resolved] だが、監視通信は正常な状態になっているのか？"></a>Q. [Resolved] だが、監視通信は正常な状態になっているのか？</h2><p>A. “監視通信が行えていない” という情報が削除された結果であり、実際に監視通信が正常ではない状態が継続している可能性があります。  </p><p>例えば、Azure AD Connect (AADC) サーバーを数時間程度シャットダウンした場合には、停止後から約 2 時間で監視通信が行えていない内容の通知メールが送付され、起動後から約 2 時間で監視通信が再開できた (今回の通知メールと同じ内容の) 通知メールが送付されます。<br>そのため、1 つの目安として通知メール内の “RAISED (問題発生日時)” と “RESOLVE (問題解決日時)” を参照し、メンテナンスや意図した作業に伴い AADC サーバーから Azure AD に向けた通信が行えないような状態に心当たりがないか確認します。</p><h2 id="Q-通知メールはどのタイミングで配信されるのか？"><a href="#Q-通知メールはどのタイミングで配信されるのか？" class="headerlink" title="Q. 通知メールはどのタイミングで配信されるのか？"></a>Q. 通知メールはどのタイミングで配信されるのか？</h2><p>A. データセンター側では約 2 時間おきにアップロード状況の確認が行われています。</p><p>確認が行われるまでに 2 時間以上アップロードされていない場合にメールで通知されるため、アップロードがされなくなってから、通知メールが配信されるまでは少なくとも 2 時間、場合によっては 4 時間ほど要します。</p><h2 id="Q-監視通信が行えていないが、Azure-Active-Directory-との同期処理は問題ないか？"><a href="#Q-監視通信が行えていないが、Azure-Active-Directory-との同期処理は問題ないか？" class="headerlink" title="Q. 監視通信が行えていないが、Azure Active Directory との同期処理は問題ないか？"></a>Q. 監視通信が行えていないが、Azure Active Directory との同期処理は問題ないか？</h2><p>A. オンプレミスのサーバーを監視する Agent による通信に関してであり、ディレクトリ同期ができているか、できていないかとは関係しません。  </p><h2 id="Q-監視通信を使用していないので、無効化する手順は？"><a href="#Q-監視通信を使用していないので、無効化する手順は？" class="headerlink" title="Q. 監視通信を使用していないので、無効化する手順は？"></a>Q. 監視通信を使用していないので、無効化する手順は？</h2><p>A. 下記のサービスを停止することで無効化することが可能です。</p><ul><li>Azure AD Connect Health Sync Insights Service  </li><li>Azure AD Connect Health Sync Monitoring Service  </li></ul><h2 id="Q-監視通信が正常に行えているか確認する方法は？"><a href="#Q-監視通信が正常に行えているか確認する方法は？" class="headerlink" title="Q. 監視通信が正常に行えているか確認する方法は？"></a>Q. 監視通信が正常に行えているか確認する方法は？</h2><p>A. Azure AD Connect サーバーにて、上述の 2 つのサービスが稼働していることを確認します。<br>Azure AD Connect サーバーにて、下記のコマンドを実行します。  </p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Test-AzureADConnectHealthConnectivity</span> <span class="literal">-Role</span> Sync <span class="literal">-ShowResult</span>  </span><br></pre></td></tr></table></figure><p>コマンド実行例)</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="built_in">Test-AzureADConnectHealthConnectivity</span> <span class="literal">-Role</span> Sync <span class="literal">-ShowResult</span>  <span class="built_in">Test-AzureADConnectHealthConnectivity</span><span class="string">&#x27;s execution in details are as follows:  </span></span><br><span class="line"><span class="string">Starting Test-AzureADConnectHealthConnectivity ...  </span></span><br><span class="line"><span class="string">Connectivity Test Step 1 of 3: Testing dependent service endpoints begins ...  </span></span><br><span class="line"><span class="string">AAD CDN connectivity is skipped.  </span></span><br><span class="line"><span class="string">Connecting to endpoint https://login.microsoftonline.com  Endpoint validation for https://login.microsoftonline.com is Successful.  </span></span><br><span class="line"><span class="string">Connecting to endpoint https://login.windows.net  Endpoint validation for https://login.windows.net is Successful.  </span></span><br><span class="line"><span class="string">Connecting to endpoint https://policykeyservice.dc.ad.msft.net/clientregistrationmanager.svc  </span></span><br><span class="line"><span class="string">Endpoint validation for https://policykeyservice.dc.ad.msft.net/clientregistrationmanager.svc is Successful.  </span></span><br><span class="line"><span class="string">Connecting to endpoint https://policykeyservice.dc.ad.msft.net/policymanager.svc  </span></span><br><span class="line"><span class="string">Endpoint validation for https://policykeyservice.dc.ad.msft.net/policymanager.svc is Successful.  </span></span><br><span class="line"><span class="string">Connectivity Test Step 1 of 3 - Testing dependent service endpoints completed successfully.  </span></span><br><span class="line"><span class="string">Connectivity Test Step 2 of 3 - Blob data upload procedure begins ...  </span></span><br><span class="line"><span class="string">Tenant Id is successfully collected during agent registration.  </span></span><br><span class="line"><span class="string">Connectivity Test Step 2 of 3 - Blob data upload procedure completed successfully.  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Connectivity Test Step 3 of 3 - EventHub data upload procedure begins ...  </span></span><br><span class="line"><span class="string">Tenant Id is successfully collected during agent registration.  </span></span><br><span class="line"><span class="string">Connectivity Test Step 3 of 3 - EventHub data upload procedure completed successfully.  </span></span><br><span class="line"><span class="string">Test-AzureADConnectHealthConnectivity completed successfully...  </span></span><br></pre></td></tr></table></figure><ul><li>3 つの確認ステップが実行されますので、それぞれ “completed successfully” となるかを確認ください。  </li></ul><p>Title : Azure AD Connect Health サービスへの接続テスト<br>URL:<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/connect-health/active-directory-aadconnect-health-agent-install#test-connectivity-to-azure-ad-connect-health-service">https://docs.microsoft.com/ja-jp/azure/active-directory/connect-health/active-directory-aadconnect-health-agent-install#test-connectivity-to-azure-ad-connect-health-service</a></p><h2 id="Q-監視通信の通知メールの宛先を変更方法は？"><a href="#Q-監視通信の通知メールの宛先を変更方法は？" class="headerlink" title="Q. 監視通信の通知メールの宛先を変更方法は？"></a>Q. 監視通信の通知メールの宛先を変更方法は？</h2><p>A. Azure Portal 画面より変更、無効化することが可能です。  </p><ol><li>Azure ポータル（<a href="http://portal.azure.com)にサインインします./">http://portal.azure.com）にサインインします。</a>  </li><li>左側のメニューから [Azure Active Directory] – [Azure AD Connect] - [Connect 同期] をクリックします。  </li><li>[正常性と分析] の下にある [Azure AD Connect Health] をクリックします。  </li><li>[Azure Active Directory Connect (Sync)] の枠内にある [同期サービス] をクリックし、対象テナントをクリックします。  </li><li>[操作] の枠内をクリックします。  </li><li>[通知設定] をクリックします。<br>通知を無効化する場合 : “新しいアラートの通知を電子メールで受け取ります。” 項目のチェックをオフに設定します。<br>通知先を変更する場合 : 変更を行うメールアドレス欄を選択し、変更後のアドレスを入力します。  </li><li>[保存] をクリックします。  </li></ol><p>Title : Azure Active Directory Connect Health の操作<br>URL:<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/connect-health/active-directory-aadconnect-health-operations">https://docs.microsoft.com/ja-jp/azure/active-directory/connect-health/active-directory-aadconnect-health-operations</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;alert is-info&quot;&gt;&lt;p class=&quot;alert-title&quot;&gt;Note&lt;/p&gt;&lt;p&gt;本記事は Technet Blog の更新停止に伴い &lt;a href=&quot;https://blogs.technet.microsoft.com/jpazure</summary>
      
    
    
    
    
    <category term="Azure AD Connect" scheme="https://jpazureid.github.io/blog/tags/Azure-AD-Connect/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Graph PowerShell v2.0 でサポートされた認証方法と変更点</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-graph-powershell-v2.0/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-graph-powershell-v2.0/</id>
    <published>2023-07-20T00:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.779Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。Azure Identity チームの沓澤です。</p><p>多くのお客様にお使いいただいている Microsoft Graph PowerShell モジュールの v2.0 が 2023/7/5 にリリースされました！モジュールの再インストールやアップデートを実施した際に Microsoft Graph PowerShell v2.0 以降がインストールされるようになります。Microsoft Entra ID 関連の変更点としては、サポートされる認証方法が増えます。一方で、Microsoft Entra ID を含め全てのサービスに関連いたしますが、今回のアップデートには破壊的変更があります。</p><p>本記事では Microsoft Graph PowerShell v2.0 のインストール方法の説明した後、サポートされるようになった認証方法と破壊的変更の内容について説明します。</p><h2 id="Microsoft-Graph-PowerShell-v2-0-のインストール"><a href="#Microsoft-Graph-PowerShell-v2-0-のインストール" class="headerlink" title="Microsoft Graph PowerShell v2.0 のインストール"></a>Microsoft Graph PowerShell v2.0 のインストール</h2><p>Microsoft Graph PowerShell は Microsoft Graph REST API (v1.0/Beta) を呼び出すためのモジュールです。Microsoft Graph PowerShell v1.x では 1 つのモジュール (Microsoft Graph PowerShell) で Microsoft Graph REST API v1.0 と Microsoft Graph REST API Beta の両方を呼び出せます。</p><p>一方、Microsoft Graph PowerShell v2.0 では、大きく二つのモジュールに分けられており、Microsoft Graph REST API v1.0 の呼び出しには Microsoft Graph PowerShell モジュールを使用し、Microsoft Graph REST API Beta の呼び出しには Microsoft Graph PowerShell Beta モジュールを使う必要があります。そのため、Microsoft Graph REST API Beta の呼び出しを計画している場合には Microsoft Graph PowerShell Beta のインストールが必要です。</p><p><img src="/blog/azure-active-directory/microsoft-graph-powershell-v2.0/module-image.png"></p><p>以下では、Microsoft Graph PowerShell モジュールおよび Microsoft Graph PowerShell Beta モジュールのインストール方法を説明します。</p><p>公開情報は既に v2.0 を前提とした説明に更新されていますので詳細は <a href="https://learn.microsoft.com/en-us/powershell/microsoftgraph/installation?view=graph-powershell-1.0#installation">Install the Microsoft Graph PowerShell SDK</a> をご確認ください。</p><h3 id="Microsoft-Graph-PowerShell-モジュールのインストールおよびアップデート"><a href="#Microsoft-Graph-PowerShell-モジュールのインストールおよびアップデート" class="headerlink" title="Microsoft Graph PowerShell モジュールのインストールおよびアップデート"></a>Microsoft Graph PowerShell モジュールのインストールおよびアップデート</h3><p>Microsoft Graph PowerShell を初めて使用する場合は以下のコマンドでインストールください。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Install-Module</span> Microsoft.Graph</span><br></pre></td></tr></table></figure><p>既に Microsoft Graph PowerShell v1.x を使用中の場合は以下のコマンドでアップデートできます。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Update-Module</span> Microsoft.Graph</span><br></pre></td></tr></table></figure><h3 id="Microsoft-Graph-PowerShell-Beta-モジュールのインストール"><a href="#Microsoft-Graph-PowerShell-Beta-モジュールのインストール" class="headerlink" title="Microsoft Graph PowerShell Beta モジュールのインストール"></a>Microsoft Graph PowerShell Beta モジュールのインストール</h3><p>Microsoft Graph PowerShell Beta モジュールは、Microsoft Graph PowerShell モジュールと別々にインストールできます。言い換えますと Microsoft Graph PowerShell と Microsoft Graph PowerShell Beta は共存できます。運用環境にて Beta エンドポイントの利用を避けたい (v1.0 エンドポイントのみを利用したい) 場合は、上記手順で Microsoft Graph PowerShell モジュールのみをインストールし、Microsoft Graph PowerShell Beta モジュールをインストールしないということも可能です。</p><p>インストールするには以下コマンドを実行します。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Install-Module</span> Microsoft.Graph.Beta</span><br></pre></td></tr></table></figure><h2 id="v2-0-からサポートされる認証方法"><a href="#v2-0-からサポートされる認証方法" class="headerlink" title="v2.0 からサポートされる認証方法"></a>v2.0 からサポートされる認証方法</h2><p>以下 2 つを使用した認証方法がサポートされるようになりました。</p><ul><li>マネージド ID</li><li>クライアント シークレット</li></ul><h3 id="マネージド-ID"><a href="#マネージド-ID" class="headerlink" title="マネージド ID"></a>マネージド ID</h3><p>システム割り当てマネージド ID での認証をする場合は以下コマンドを実行ください。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">Connent<span class="literal">-MgGraph</span> <span class="literal">-Identity</span></span><br></pre></td></tr></table></figure><p>ユーザー割り当てマネージド ID での認証をする場合は以下コマンドを実行ください。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-MgGraph</span> <span class="literal">-Identity</span> <span class="literal">-u</span> &lt;ユーザー割り当てマネージド ID のアプリケーション ID&gt;</span><br></pre></td></tr></table></figure><h3 id="クライアント-シークレット"><a href="#クライアント-シークレット" class="headerlink" title="クライアント シークレット"></a>クライアント シークレット</h3><p>クライアント シークレットで認証する場合は以下コマンドを実行ください。認証ポップアップにクライアント シークレットの文字列を入力します。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$ClientSecretCredential</span> = <span class="built_in">Get-Credential</span> <span class="literal">-Username</span> <span class="string">&quot;&lt;アプリケーション ID&gt;&quot;</span> Message <span class="string">&quot;Enter the client secret string.&quot;</span></span><br><span class="line"><span class="built_in">Connect-MgGraph</span> <span class="literal">-TenantId</span> <span class="string">&quot;&lt;テナント Id&gt;&quot;</span> <span class="literal">-ClientSecretCredential</span> <span class="variable">$ClientSecretCredential</span></span><br></pre></td></tr></table></figure><h2 id="破壊的変更"><a href="#破壊的変更" class="headerlink" title="破壊的変更"></a>破壊的変更</h2><p>Microsoft Graph PowerShell を使用し Microsoft Entra ID 関連のデータ操作をする際に、関連するものを数点ピックアップします。</p><p>詳細については GitHub の <a href="/blog/docs/upgrade-to-v2/">v2.0 へのアップグレード ガイド</a> をご確認ください</p><h3 id="Select-MgProfile-コマンドの廃止"><a href="#Select-MgProfile-コマンドの廃止" class="headerlink" title="Select-MgProfile コマンドの廃止"></a>Select-MgProfile コマンドの廃止</h3><p>Microsoft Graph PowerShell v1.x では Select-MgProfile コマンドにより Microsoft Graph REST API v1.0 と Microsoft Graph REST API Beta との呼び出し先の振り分けていました。v2.0 からは Select-MgProfile コマンドは廃止され、上述のとおり Microsoft Graph PowerShell モジュールからは Microsoft Graph REST API v1.0 を呼び出し、Microsoft Graph PowerShell Beta モジュールからは Microsoft Graph REST API Beta を呼び出すように変更になりました。</p><h3 id="Microsoft-Graph-REST-API-Beta-を呼び出す際のコマンドの命名規則が-lt-Verb-gt-MgBeta-lt-Noun-gt-に"><a href="#Microsoft-Graph-REST-API-Beta-を呼び出す際のコマンドの命名規則が-lt-Verb-gt-MgBeta-lt-Noun-gt-に" class="headerlink" title="Microsoft Graph REST API Beta を呼び出す際のコマンドの命名規則が &lt;Verb&gt;-MgBeta&lt;Noun&gt; に"></a>Microsoft Graph REST API Beta を呼び出す際のコマンドの命名規則が &lt;Verb&gt;-Mg<strong>Beta</strong>&lt;Noun&gt; に</h3><p>Micrsosft Graph REST API Beta を呼び出す際には Microsoft Graph PowerShell Beta モジュール内のコマンドを使用します。命名規則は &lt;Verb&gt;-Mg<strong>Beta</strong>&lt;Noun&gt; です。</p><p>下表に例を記載します。</p><table><thead><tr><th align="center">v1.0</th><th align="center">Beta</th></tr></thead><tbody><tr><td align="center">Get-MgUser</td><td align="center">Get-MgBetaUser</td></tr><tr><td align="center">Get-MgUserMessage</td><td align="center">Get-MgBetaUserMessage</td></tr></tbody></table><h3 id="Connect-MgGraph-コマンドにおける-ForceRefresh-オプションの廃止"><a href="#Connect-MgGraph-コマンドにおける-ForceRefresh-オプションの廃止" class="headerlink" title="Connect-MgGraph コマンドにおける -ForceRefresh オプションの廃止"></a>Connect-MgGraph コマンドにおける -ForceRefresh オプションの廃止</h3><p>Connect-MgGraph -ForceRefresh が使用不可になり、代わりに Disconnect-MgGraph 後に Connect-MgGraph を実行する必要があります。</p><h3 id="Connect-MgGraph-コマンドにおける-AccessToken-オプションでは-SecureString-型の引数が必要に"><a href="#Connect-MgGraph-コマンドにおける-AccessToken-オプションでは-SecureString-型の引数が必要に" class="headerlink" title="Connect-MgGraph コマンドにおける -AccessToken オプションでは SecureString 型の引数が必要に"></a>Connect-MgGraph コマンドにおける -AccessToken オプションでは SecureString 型の引数が必要に</h3><p>以下コマンドではエラーが生じます。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-MgGraph</span> <span class="literal">-AccessToken</span> &lt;アクセス トークンの文字列&gt;</span><br></pre></td></tr></table></figure><p>代わりに以下のように SecureString 型の引数を指定する必要があります:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$st</span> = <span class="built_in">ConvertTo-SecureString</span> &lt;アクセス トークンの文字列&gt; <span class="literal">-AsPlainText</span> <span class="literal">-Force</span></span><br><span class="line"><span class="built_in">Connect-MgGraph</span> <span class="literal">-AccessToken</span> <span class="variable">$st</span></span><br></pre></td></tr></table></figure><h3 id="モジュール名のリネーム"><a href="#モジュール名のリネーム" class="headerlink" title="モジュール名のリネーム"></a>モジュール名のリネーム</h3><p>モジュール名の変更を下表にまとめます:</p><table><thead><tr><th align="center">v1.x</th><th align="center">v2.0</th></tr></thead><tbody><tr><td align="center">DeviceManagement.Enrolment</td><td align="center">DeviceManagement.Enrollment</td></tr><tr><td align="center">DeviceManagement.Enrollment</td><td align="center">Identity.Governance</td></tr></tbody></table><p>スクリプト内で Import-Module をしている場合にはモジュール名の変更が必要です。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは。Azure Identity チームの沓澤です。&lt;/p&gt;
&lt;p&gt;多くのお客様にお使いいただいている Microsoft Graph PowerShell モジュールの v2.0 が 2023/7/5 にリリースされました！モジュールの再インストールやアップデート</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="Microsoft Graph" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Graph/"/>
    
    <category term="Microsoft Graph PowerShell" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Graph-PowerShell/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra - Security Service Edge へ拡大するための新機能</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-expands-into-securityserviceedge-with-two-new-offerings/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-expands-into-securityserviceedge-with-two-new-offerings/</id>
    <published>2023-07-19T00:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.763Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 姚 (ヨウ) です。</p><p>本記事は、2023 年 7 月 11 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/microsoft-entra-expands-into-security-service-edge-with-two-new/ba-p/3847829">Microsoft Entra Expands into Security Service Edge with Two New Offerings - Microsoft Community Hub</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>柔軟な仕事環境やデジタル トランスフォーメーションにより、どのようにして情報に安全にアクセスするかという方法も変化してきています。従来のネットワークをベースにしたセキュリティのアプローチは現在の環境には適さなくなってきました。従来の方法は、エンド ユーザーの体験を損なうだけでなく、ユーザーに対して、ネットワーク全体に必要以上のアクセス権を与えることになります。攻撃者が、1 名の情報漏洩ユーザー、1 つの感染デバイスなど、1 つのきっかけを得るだけで、内部ネットワークへ自由に入り込み、重要情報資産が流出することになります。</p><p><img src="/blog/azure-active-directory/microsoft-entra-expands-into-securityserviceedge-with-two-new-offerings/over_view.png"></p><p>先進的なアクセス ソリューションをシステムに導入したとしても、複数の ID とネットワーク ツールを統合し、管理する必要があります。なぜなら、単独の ID またはネットワーク ツールだけでは、すべてのアクセス ポイントを保護することはできないからです。もしうまく統合できないツールを利用してしまうと、重要な統合ポイントを見逃してしまう可能性があります。熟練した攻撃者はそういったソリューションの間にある隙間を攻撃するのです。全アプリケーションまたはリソースを保護するためには簡単かつアジャイルなアプローチが必要です。本日弊社が紹介する新しいネットワーク モデルにより、アクセス保護の仕方も変わってくるでしょう。</p><p>本日は <a href="https://www.microsoft.com/en-us/security/blog/2023/07/11/microsoft-entra-expands-into-security-service-edge-and-azure-ad-becomes-microsoft-entra-id/">2 つの新しい製品</a> を紹介いたします。</p><ul><li>Microsoft Entra Internet Access</li><li>Microsoft Entra Private Access</li></ul><p>ID とネットワーク ソリューションを連携させることにより、個々のアプリにどのツールが適切か考えたり、ID 担当チームが作成したポリシーとネットワーク担当チームが作成したポリシーとを連携させる方法を検討したりすることに時間に費やす必要はなくなります。Microsoft Entra の条件付きアクセスを利用して ID とネットワークを総合的に制御することができるようになります。</p><p>クラウドベースの ID 中心のネットワーク アクセス ソリューションを通して、すべてのエンドユーザー、アプリケーション、外部リソースそして IT システムをつなぐことができるようになります。このクラウド サービスはレガシーのオンプレミス システムと比較すると、変化に柔軟で管理が容易であり、コスト効率がよいため、ユーザーの生産性を損なうことはありません。このモデルはゼロ トラストの原則をベースとしており、ID を検証すると共に、リスクに基づいた検出も行うことで、ユーザーの仕事に必要なアプリケーション、リソースにアクセスできるよう支援します。</p><h2 id="Microsoft-Entra-Internet-Access"><a href="#Microsoft-Entra-Internet-Access" class="headerlink" title="Microsoft Entra Internet Access"></a>Microsoft Entra Internet Access</h2><p>Microsoft Entra Internet Access は、SaaS アプリケーションおよびインターネット通信向けの、ID を軸とした Secure Web Gateway (SWG) であり、悪意がある接続や危険/非準拠なコンテンツ、外部インターネットからの脅威から保護するためのサービスです。例えば、高リスクと判断されたユーザーまたは非準拠デバイスからのアクセスは、セルフサービス パスワード リセットのページを除いて通信をすべてブロックするということが可能になります。これは、条件付きアクセスの条件の設定をネットワークの条件で拡張するようなものとお考えください。これにより、例えばセッション トークンが盗まれたとしても、その再利用を抑止するために、”準拠ネットワーク” からのみリソースへのアクセスを許可するようにも構成できます。</p><p>Universal Tenant Restrictions という Microsoft 365 向けの独自の機能も備えており、匿名アクセスを含め他テナントや個人アカウントへのデータ流出を防止し、リアルタイムに近い脅威の検出、ユーザー、場所およびデバイスに対する高精度のリスク評価、および Microsoft 365 アプリへのよりシームレスなアクセスを実現します。Microsoft Entra Internet Access はメイン ソリューションとしても、ほかの SSE ソリューションと組み合わせても展開でき、新しい Microsoft Graph API による統合も提供されます。また、ネットワーク トラフィックの情報は、エンドユーザーのクロスプラットフォームの OS およびリモート ネットワークの IPSec トンネリングを利用しても取得できます。</p><p>Microsoft 365 用および Windows 用の Microsoft Entra Internet Access が現在パブリック プレビューとして公開されています。他のすべてのトラフィック、クラウド ファイヤーウォール、脅威検知および他の OS のサポートは今年の後半に公開予定です。</p><p><img src="/blog/azure-active-directory/microsoft-entra-expands-into-securityserviceedge-with-two-new-offerings/internet_access.png"></p><h2 id="Microsoft-Entra-Private-Access"><a href="#Microsoft-Entra-Private-Access" class="headerlink" title="Microsoft Entra Private Access"></a>Microsoft Entra Private Access</h2><p>Microsoft Entra の Application Proxy をご存じかと思います。現在数千のお客様が内部ウェブ アプリケーションへのアクセスに Application Proxy を利用しています。本日、これにより優れたソリューションを発表いたします。Application Proxy と同じアプリ コネクターを共有する仕組みでありながら、組織の内部のリソース、ポートまたはプロトコールへのアクセスを保護する、ID 中心のゼロトラスト ネットワーク  アクセス (ZTNA) ソリューションです。</p><p>Microsoft Entra Private Access により、ユーザーがオフィスまたはリモートのどこにいようと、アプリケーションがオンプレミスのデータセンターまたは外部クラウドのどこにホストされていようと、より迅速かつ簡単にアプリケーションへ接続となります。これらのアプリケーションに対して何ら変更を加える必要はありません。追加の変更なく、多要素認証 (MFA) やデバイス準拠の検証、ID Protection、ID Governance、およびシングル サインオンを TCP/UDP をベースとしたアプリケーションに構成できます。加えて、SSH、RDP、SAP、SMB ファイル共有やほかの内部リソースもサポートします。</p><p>属性ベースの条件付きアクセス ポリシーを利用することにより、エンタープライズ向けのアプリケーションの重要度に基づき、より効果的に複数のアプリケーションを対象にしてシンプルなポリシーを作成することはできます。例えば、MFA を要求するポリシー、デバイスの準拠を要求するポリシー、ユーザーが低リスクであることを要求するポリシー、重要なアプリケーションに対して準拠したネットワークからのアクセスを要求するポリシーが挙げられます。特定のアプリケーションを対象にした個別のポリシーを構成することももちろん可能です。条件付きアクセス ポリシーと継続的アクセス評価 (CAE) との統合によって、レガシー アプリケーションの認証方法である Kerberos または NTLM を変更することなく、安全かつシームレスに先進的な認証を追加することができます。Microsoft Entra Private Access は現在パブリック プレビューです。</p><p><img src="/blog/azure-active-directory/microsoft-entra-expands-into-securityserviceedge-with-two-new-offerings/private_access.png"></p><h2 id="ID-中心の-Security-Service-Edge-SSE-ソリューションでどこからでもアプリケーションやリソースへ安全にアクセス"><a href="#ID-中心の-Security-Service-Edge-SSE-ソリューションでどこからでもアプリケーションやリソースへ安全にアクセス" class="headerlink" title="ID 中心の Security Service Edge (SSE) ソリューションでどこからでもアプリケーションやリソースへ安全にアクセス"></a>ID 中心の Security Service Edge (SSE) ソリューションでどこからでもアプリケーションやリソースへ安全にアクセス</h2><p>Microsoft Entra Internet Access と Private Access に加えて、弊社の SaaS - セキュリティに特化した CASB (Cloud Access Security Broker) - である Microsoft Defender for Cloud Apps を組み合わせることによって Microsoft の Security Service Edge ソリューションが構成されます。このソリューションは Microsoft の広範なセキュリティ製品と深く統合されており、オープンなパートナー エコシステムを形成するため、既存のネットワークとセキュリティ ソリューションとも連携できます。</p><p>Microsoft Internet Access と Private Access は、同じエージェントを共有しており、複数の種類の OS で動作し、なおかつ複数の種類のデバイスとネットワークで一貫した接続性を提供いたします。アプリケーションまたはウェブサイトに対して、利用する IdP に関係なく、しかもアプリケーションを変更することなく、ID、デバイス、アプリケーション、そして今後はネットワーク条件を考慮した制御を一つの条件付きアクセス ポリシーで実現できるようになるのです。</p><p><img src="/blog/azure-active-directory/microsoft-entra-expands-into-securityserviceedge-with-two-new-offerings/sse.png" alt="ID 中心の Security Service Edge (SSE) ソリューションでどこからでもアプリケーションやリソースへ安全にアクセス可能となります。一つの条件付きアクセスの制御を用いて、ネットワーク アクセスのセキュリティをよりシンプルにし、より良いユーザー体験をお届けします。"></p><p>Microsoft の SSE ソリューションは世界最大の企業ネットワークの 1 つである <a href="https://learn.microsoft.com/en-us/azure/networking/microsoft-global-network">Microsoft Global Network</a> によって提供されます。Microsoft Global Network は、<a href="https://azure.microsoft.com/en-us/explore/global-infrastructure/global-network/#features">185 以上のグローバルなネットワーク接続拠点</a> に加え、世界中に巨大な網目のように配置されたエッジ ノードにより、61 の Azure リージョンの<a href="https://azure.microsoft.com/en-us/explore/global-infrastructure/">データセンター</a> を結んでいます。これにより、ユーザーとデバイスをパブリックおよびプライベートのリソースにシームレスかつ安全に接続できるようになります。現在、Microsoft の SSE は北米とヨーロッパの一部の地域で提供されていますが、今年中に利用できる地域を追加する予定です。</p><p>我々の SSE ソリューションの導入により、Microsoft Internet Access と Private Access がユーザーの ID、デバイス 準拠状態、アプリケーション、そして今では新しいネットワークの準拠状態を条件として、どのアプリケーションおよびリソースに対しても、ID を中心とした単一のアプローチで安全な接続を実現します。すべてのアクセス ポリシーを統合し、継続的アクセス評価によりさらにポリシーを強化するということが、これまで以上に簡単になりました。</p><p>引き続き製品の Deep Dive ブログにもご期待ください。また、7 月 20 日の <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/live-series-6-27-amp-7-20-microsoft-entra-tech-accelerator/ba-p/2520433">Tech Accelerator Product Deep Dive Session</a> では、Microsoft Internet Access と Private Access がいかに組織のデジタル資産へのアクセスをより安全にするかという点をさらに紐解いて説明いたします。</p><p>このソリューションをより良くするために、ぜひパブリック プレビューに参加いただき、フィードバックを提供ください。</p><p>以下の公開情報もご参照いただけますと幸いです。</p><ul><li><a href="https://www.microsoft.com/security/business/identity-access/microsoft-entra-internet-access">Microsoft Entra Internet Access</a></li><li><a href="https://www.microsoft.com/en-us/security/business/identity-access/microsoft-entra-private-access">Microsoft Entra Private Access</a></li><li><a href="https://aka.ms/SSEPublicPreview">Get started and try previews</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 姚 (ヨウ) です。&lt;/p&gt;
&lt;p&gt;本記事は、2023 年 7 月 11 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD Connect アップグレード手順詳細</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory-connect/how-to-upgrade-details/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory-connect/how-to-upgrade-details/</id>
    <published>2023-07-13T15:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.027Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。 Azure Identity サポートの小出です。</p><p>以前、Azure AD Connect の非推奨プロセスに伴い、多くのお客様にて推奨バージョンへのアップグレードご検討いただいている状況となり、弊社にも多くのお問い合わせをいただいておりました。<br>現在はすでに v1.x は廃止され、多くのお客様が v2.x を利用されていますので、以前展開していた手順詳細資料をこの度アップデートいたしました。</p><p>なお、2023 年 10 月 1 日以降は AADC v1.x からの接続を停止することから、まだ v1.x を利用しているお客様においては、早急にアップグレードの対応を実施いただいているかと思います。</p><p>利用されているバージョンが v1.x、v2.x にかかわらず、利用できる手順となりますので、実際の作業時の参考にしていただければ幸いです。</p><p>今回ご紹介する手順のシナリオは下記の 3 パターンとなります。</p><ul><li>A. Azure AD Connect 2 台構成によるスウィング アップグレード</li><li>B. Azure AD Connect 1 台構成に 1 台追加で構成し、アップグレード</li><li>C. Azure AD Connect 1 台構成によるインプレースアップグレード</li></ul><p>それぞれの手順の流れと手順内容を pptx ファイルに纏めさせていただいています。<br>ご利用いただいている環境に応じて、ご参照ください。</p><h2 id="A-Azure-AD-Connect-2-台構成によるスウィング-アップグレード"><a href="#A-Azure-AD-Connect-2-台構成によるスウィング-アップグレード" class="headerlink" title="A. Azure AD Connect 2 台構成によるスウィング アップグレード"></a>A. Azure AD Connect 2 台構成によるスウィング アップグレード</h2><h3 id="lt-手順概要-gt"><a href="#lt-手順概要-gt" class="headerlink" title="&lt;手順概要&gt;"></a>&lt;手順概要&gt;</h3><ol><li>既存環境の各サーバーにて、動作状況の確認などアップグレード前の事前確認を行います。</li><li>カスタム同期ルールをはじめ、設定内容を保存します。</li><li>Server B の Azure AD Connect のインプレース アップグレードを行います。</li><li>Server B にて、アップグレード後の動作状況を確認します。</li><li>Server A にて Azure AD Connect のステージング モードを有効化します。</li><li>Server B にて Azure AD Connect のステージング モードを無効化し、アクティブにします。</li><li>Server A の Azure AD Connect のインプレース アップグレードを行います。</li><li>Server A にて、アップグレード後の動作状況を確認します。</li></ol><h3 id="lt-手順詳細-gt"><a href="#lt-手順詳細-gt" class="headerlink" title="&lt;手順詳細&gt;"></a>&lt;手順詳細&gt;</h3><p><a href="/blog/azure-active-directory-connect/how-to-upgrade-details/aadc-upgrade-a-2023v2.pptx">アップグレード手順詳細 A</a></p><h2 id="B-Azure-AD-Connect-1-台構成に-1-台追加で構成し、アップグレード"><a href="#B-Azure-AD-Connect-1-台構成に-1-台追加で構成し、アップグレード" class="headerlink" title="B. Azure AD Connect 1 台構成に 1 台追加で構成し、アップグレード"></a>B. Azure AD Connect 1 台構成に 1 台追加で構成し、アップグレード</h2><h3 id="lt-手順概要-gt-1"><a href="#lt-手順概要-gt-1" class="headerlink" title="&lt;手順概要&gt;"></a>&lt;手順概要&gt;</h3><ol><li>既存環境の ServerA にて、動作状況の確認などアップグレード前の事前確認を行います。</li><li>カスタム同期ルールをはじめ、設定内容を保存します。</li><li>Server B となる新しいサーバーを用意します。</li><li>新規構築した ServerB に Azure AD Connect をインストールします。 (ステージング モード有効)</li><li>Server B で動作状況を確認します。</li><li>Server A にて、 Azure AD Connect のステージング モードを有効化します。</li><li>Server B にて、 Azure AD Connect のステージング モードを無効化し、アクティブにします。</li><li>Server A の Azure AD Connect のインプレース アップグレードを行います。</li><li>Server A で動作状況を確認します。</li></ol><h3 id="lt-手順詳細-gt-1"><a href="#lt-手順詳細-gt-1" class="headerlink" title="&lt;手順詳細&gt;"></a>&lt;手順詳細&gt;</h3><p><a href="/blog/azure-active-directory-connect/how-to-upgrade-details/aadc-upgrade-b-2023v2.pptx">アップグレード手順詳細 B</a></p><h2 id="C-Azure-AD-Connect-1-台構成によるインプレースアップグレード"><a href="#C-Azure-AD-Connect-1-台構成によるインプレースアップグレード" class="headerlink" title="C. Azure AD Connect 1 台構成によるインプレースアップグレード"></a>C. Azure AD Connect 1 台構成によるインプレースアップグレード</h2><h3 id="lt-手順概要-gt-2"><a href="#lt-手順概要-gt-2" class="headerlink" title="&lt;手順概要&gt;"></a>&lt;手順概要&gt;</h3><ol><li>既存環境の動作状況の確認</li><li>設定内容の保存</li><li>アップグレード</li><li>アップグレードの動作確認 (手順1. と同じ)</li></ol><h3 id="lt-手順詳細-gt-2"><a href="#lt-手順詳細-gt-2" class="headerlink" title="&lt;手順詳細&gt;"></a>&lt;手順詳細&gt;</h3><p><a href="/blog/azure-active-directory-connect/how-to-upgrade-details/aadc-upgrade-c-2023v2.pptx">アップグレード手順詳細 C</a></p><h2 id="資料の選び方について"><a href="#資料の選び方について" class="headerlink" title="資料の選び方について"></a>資料の選び方について</h2><p>どの資料が適切な手順が分からない場合には、下記フローも参考にしてください。<br><img src="/blog/azure-active-directory-connect/how-to-upgrade-details/which-step-is-best-for-the-upgdrade.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは。 Azure Identity サポートの小出です。&lt;/p&gt;
&lt;p&gt;以前、Azure AD Connect の非推奨プロセスに伴い、多くのお客様にて推奨バージョンへのアップグレードご検討いただいている状況となり、弊社にも多くのお問い合わせをいただいておりました。</summary>
      
    
    
    
    
    <category term="Azure AD Connect" scheme="https://jpazureid.github.io/blog/tags/Azure-AD-Connect/"/>
    
  </entry>
  
  <entry>
    <title>ハードマッチによる Azure AD (Office 365) 上のユーザーをオンプレミス Active Directory ユーザーと紐付ける方法</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory-connect/upn-hard-match/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory-connect/upn-hard-match/</id>
    <published>2023-07-13T15:00:00.000Z</published>
    <updated>2023-09-14T07:05:49.195Z</updated>
    
    <content type="html"><![CDATA[<div class="alert is-info"><p class="alert-title">Note</p><p>本記事は Technet Blog の更新停止に伴い <a href="https://blogs.technet.microsoft.com/jpazureid/2017/10/05/135/">https://blogs.technet.microsoft.com/jpazureid/2017/10/05/135/</a> の内容を移行したものです。</p><p>元の記事の最新の更新情報については、本内容をご参照ください。</p></div><blockquote><p>2020/09/26 更新<br><a href="/blog/azure-active-directory-connect/aboutSoftMatching/">ソフトマッチによるAzure AD (Office 365) 上のユーザーをオンプレミス Active Directory ユーザーと紐付ける方法</a> のブログの公開に併せて、タイトルに “ハードマッチ” の記載を追記しました。</p><p>2023/7/14 更新<br>MSOL コマンド部分を新しい Microsoft Graph PowerShell SDK コマンドに置き換えました。</p></blockquote><p>こんにちは、Azure &amp; Identity サポート チームです。</p><p>今回は Azure AD (Office 365) 上のユーザーをオンプレミス Active Directory ユーザーと紐付ける方法の一つで、ハードマッチと呼ばれる方法についてご紹介します。</p><p>既に Azure AD 上にユーザー アカウントが存在している状態で、そのユーザーを後からオンプレミスの Active Directory (AD) に追加し、同期をおこなうときにその既存のアカウントをそのまま利用したいということがあると思います。</p><p>このようなケースではオンプレミス AD で対象となるアカウントのメール アドレス、または UPN 名を一致させた上で同期をおこなうという手法が一般的には取られます (これをソフトマッチと呼びます)。このソフトマッチができない場合 (UPN 名が異なるアカウントを紐づける必要がある場合など) にはハード マッチと呼ばれる方法で直接的に同期時にオブジェクトの一意性を確保する ID 情報 Immutable ID を紐づけます。</p><p>Azure AD Connect の既定の構成では、オンプレミス AD の ObjectGUID (バージョン 1.1.486.0 以前) あるいは msDS-ConsistencyGuid (バージョン 1.1.524.0 以降) を Base64 でエンコードした値を Immutable ID (source Anchor) として紐づけています。</p><p>以下では Azure AD Connect で ObjectGUID を ImmutableId と紐づける構成とている場合においてハードマッチによる同期をおこなう設定をご紹介します。</p><h2 id="手順"><a href="#手順" class="headerlink" title="手順"></a>手順</h2><ol><li>オンプレミス AD にて Base64 でエンコードされた ObjectGUID を確認します</li><li>Azure AD 上で ImmutableId が設定されてないことを確認します</li><li>Azure AD 上のアカウントに ImmutableId を手動で設定します</li><li>手動で差分ディレクトリ同期を実施します</li></ol><p>※ 4 を除き、同期処理が止まっている状態で作業をご実施ください。同期処理が止まっていないと紐づけしたいオンプレミス AD のアカウントが同期されてしまい、Immutable ID を紐づけできません。</p><h3 id="1-オンプレミス-AD-にて-Base64-でエンコードされた-ObjectGUID-を確認"><a href="#1-オンプレミス-AD-にて-Base64-でエンコードされた-ObjectGUID-を確認" class="headerlink" title="1. オンプレミス AD にて Base64 でエンコードされた ObjectGUID を確認"></a>1. オンプレミス AD にて Base64 でエンコードされた ObjectGUID を確認</h3><p>オンプレミス上の紐づけ対象のアカウントの GUID 情報を取得します。</p><ol><li>オンプレミス Active Directory の任意の DC 上で [管理ツール] - [Active Directory ユーザーとコンピューター] を開きます。</li><li>メニューから [表示] - [拡張機能] にチェックを入れます。</li><li>該当ユーザー アカウントのプロパティを開きます。</li><li>[属性エディター] タブを開き、”distinguishedName” 値を選択し、[表示] をクリックします。</li><li>distinguishedName 値 (以下、DN 値) の内容をコピーします。</li><li>コマンド プロンプト (PowerShell でも可) を起動し、以下のコマンドを実行します。</li></ol><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">ldifde <span class="operator">-f</span> c:\ ldifde_user.txt <span class="literal">-d</span> <span class="string">&quot;手順 5. でコピーした内容&quot;</span> <span class="literal">-p</span> subtree</span><br></pre></td></tr></table></figure><p>コマンド例：</p><p><img src="/blog/azure-active-directory-connect/upn-hard-match/hardmatch_11.png"></p><p>1-7. 出力されたファイルを開き、ObjectGUID の値を確認します。<br>出力結果例：</p><p><img src="/blog/azure-active-directory-connect/upn-hard-match/hardmatch_2.png"></p><h2 id="2-Azure-AD-上で-ImmutableId-が設定されてないことを確認"><a href="#2-Azure-AD-上で-ImmutableId-が設定されてないことを確認" class="headerlink" title="2. Azure AD 上で ImmutableId が設定されてないことを確認"></a>2. Azure AD 上で ImmutableId が設定されてないことを確認</h2><p>Azure AD の紐づけ対象のアカウントに ImmutableId が設定されていないことを確認します。ImmutableId が設定されている場合には、すでに同期対象となっていることを示します。</p><ol><li>インターネットに接続している任意のコンピューター上で “Windows PowerShell 用 Windows Azure Active Directory モジュール” を管理者として実行します。</li><li>起動した PowerShell にて Connect-MsolService コマンドを実行します。<br>※ 認証ダイアログが表示されますので、管理者ユーザーの資格情報を入力して [OK] ボタンをクリックします。</li><li>下記のコマンドを実行します。</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Get-MgUser -UserId  &quot;対象ユーザーの UPN&quot; -Select OnPremisesImmutableId | fl OnPremisesImmutableId</span><br></pre></td></tr></table></figure><p>コマンド例：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Get-MgUser -UserId test12127@m365x61971868.onmicrosoft.com -Select Userprincipalname,OnPremisesImmutableId | fl OnPremisesImmutableId,userprincipalname</span><br></pre></td></tr></table></figure><ol start="4"><li>出力されたファイルを開き、ImmutableId の値を確認します。</li></ol><p>出力結果例：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">OnPremisesImmutableId :（クラウド内ユーザーの場合、空白になります）</span><br><span class="line">UserPrincipalName     : test12127@m365x61971868.onmicrosoft.com</span><br></pre></td></tr></table></figure><h3 id="3-ImmutableId-を手動で設定"><a href="#3-ImmutableId-を手動で設定" class="headerlink" title="3. ImmutableId を手動で設定"></a>3. ImmutableId を手動で設定</h3><p>ディレクトリ同期ツールにて、ユーザーの情報を関連付けるには下記の情報を使用します。</p><ul><li>オンプレミス AD 側: objectGUID</li><li>Azure AD 側: ImmutableId</li></ul><ol><li>インターネットに接続している任意のコンピューター上で “Windows PowerShell 用 Windows Azure Active Directory モジュール” を管理者として実行します。</li><li>起動した PowerShell にて Connect-MsolService コマンドを実行します。<br>※認証ダイアログが表示されますので、管理者ユーザーの資格情報を入力して [OK] ボタンをクリックします。</li><li>下記のコマンドを実行します。</li></ol><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Update-MgUser</span> <span class="literal">-UserId</span> 対象ユーザーの UPN <span class="literal">-OnPremisesImmutableId</span> &lt;オンプレ AD ユーザーの  Base64 エンコードされた objectGUID 値&gt;</span><br></pre></td></tr></table></figure><p>コマンド実行例：</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Update-MgUser</span> <span class="literal">-UserId</span> test12127@m365x61971868.onmicrosoft.com <span class="literal">-OnPremisesImmutableId</span> <span class="number">2</span>/<span class="number">9</span>JCtHr0EmH+hL07o11vAaa</span><br></pre></td></tr></table></figure><p>3-4. 下記のコマンドを実行します。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Get-MgUser</span> <span class="literal">-UserId</span> 対象ユーザーの UPN <span class="literal">-Select</span> Userprincipalname,OnPremisesImmutableId | <span class="built_in">fl</span> OnPremisesImmutableId,userprincipalname</span><br></pre></td></tr></table></figure><p>コマンド例：</p><p><img src="/blog/azure-active-directory-connect/upn-hard-match/hardmatch_4.png"></p><h3 id="4-手動で差分ディレクトリ同期を実施"><a href="#4-手動で差分ディレクトリ同期を実施" class="headerlink" title="4. 手動で差分ディレクトリ同期を実施"></a>4. 手動で差分ディレクトリ同期を実施</h3><p>※ 2016 年 2 月に公開された新しいバージョン (1.1.105.0 以上) の Azure AD Connect を使用した手順をご案内いたします。</p><ol><li>ディレクトリ同期サーバーに管理者権限でログインします。</li><li>管理者の PowerShell を起動して、以下のコマンドを実行します。</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Start-ADSyncSyncCycle -PolicyType Delta</span><br></pre></td></tr></table></figure><p>※ 今回ご紹介しているケースのように Azure AD Connect が構成済みである場合は上記コマンドで差分同期をすることとなります。</p><ol start="3"><li>Office 管理ポータルで作業対象ユーザーの [同期の種類] が [クラウド] から [Active Directory ] に変わったことを確認します。</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;alert is-info&quot;&gt;&lt;p class=&quot;alert-title&quot;&gt;Note&lt;/p&gt;&lt;p&gt;本記事は Technet Blog の更新停止に伴い &lt;a href=&quot;https://blogs.technet.microsoft.com/jpazure</summary>
      
    
    
    
    
    <category term="UPN" scheme="https://jpazureid.github.io/blog/tags/UPN/"/>
    
    <category term="Azure AD Connect" scheme="https://jpazureid.github.io/blog/tags/Azure-AD-Connect/"/>
    
    <category term="Hard match" scheme="https://jpazureid.github.io/blog/tags/Hard-match/"/>
    
  </entry>
  
</feed>
